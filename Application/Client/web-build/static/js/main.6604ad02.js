(()=>{"use strict";var e={6960:(e,t,n)=>{n.r(t),n.d(t,{default:()=>Zt});var r=n(4942),a=n(885),o=n(5861),i=n(2321),l=n(7920),s=n(703),c=n(4043),u=n(7198),d=n.n(u),f=n(8482);function h(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function p(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?h(Object(n),!0).forEach((function(t){(0,r.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):h(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const g=function(e){return(0,f.jsxs)(d(),p(p({xmlns:"http://www.w3.org/2000/svg",width:588,height:285,fill:"none"},e),{},{children:[(0,f.jsx)(u.Path,{fill:"#000",d:"M92.94 177V87.4h12.8v78.464h48.512V177H92.94Zm74.208 0v-67.84h12.288V177h-12.288Zm6.144-80.896c-2.389 0-4.395-.768-6.016-2.304-1.536-1.536-2.304-3.413-2.304-5.632 0-2.304.768-4.224 2.304-5.76 1.621-1.536 3.627-2.304 6.016-2.304 2.389 0 4.352.768 5.888 2.304 1.621 1.45 2.432 3.285 2.432 5.504 0 2.304-.768 4.267-2.304 5.888-1.536 1.536-3.541 2.304-6.016 2.304Zm65.83 12.416c5.547 0 10.411 1.067 14.592 3.2 4.267 2.133 7.595 5.376 9.984 9.728 2.389 4.352 3.584 9.856 3.584 16.512V177h-12.288v-37.632c0-6.571-1.621-11.52-4.864-14.848-3.157-3.328-7.637-4.992-13.44-4.992-4.352 0-8.149.853-11.392 2.56-3.243 1.707-5.76 4.224-7.552 7.552-1.707 3.328-2.56 7.467-2.56 12.416V177h-12.288v-67.84h11.776v18.304l-1.92-4.864c2.219-4.437 5.632-7.893 10.24-10.368 4.608-2.475 9.984-3.712 16.128-3.712Zm60.885 52.096.256-15.744 39.04-35.712h14.848l-29.952 29.44-6.656 5.632-17.536 16.384ZM290.023 177V82.024h12.288V177h-12.288Zm51.84 0-26.624-33.024 7.936-9.856L356.967 177h-15.104Zm27.035 0v-67.84h12.288V177h-12.288Zm6.144-80.896c-2.389 0-4.395-.768-6.016-2.304-1.536-1.536-2.304-3.413-2.304-5.632 0-2.304.768-4.224 2.304-5.76 1.621-1.536 3.627-2.304 6.016-2.304 2.389 0 4.352.768 5.888 2.304 1.621 1.45 2.432 3.285 2.432 5.504 0 2.304-.768 4.267-2.304 5.888-1.536 1.536-3.541 2.304-6.016 2.304Zm65.83 12.416c5.547 0 10.411 1.067 14.592 3.2 4.267 2.133 7.595 5.376 9.984 9.728 2.389 4.352 3.584 9.856 3.584 16.512V177h-12.288v-37.632c0-6.571-1.621-11.52-4.864-14.848-3.157-3.328-7.637-4.992-13.44-4.992-4.352 0-8.149.853-11.392 2.56-3.243 1.707-5.76 4.224-7.552 7.552-1.707 3.328-2.56 7.467-2.56 12.416V177h-12.288v-67.84h11.776v18.304l-1.92-4.864c2.219-4.437 5.632-7.893 10.24-10.368 4.608-2.475 9.984-3.712 16.128-3.712Zm80.597 94.08a62.083 62.083 0 0 1-18.176-2.688c-5.803-1.707-10.539-4.181-14.208-7.424l5.888-9.472c3.157 2.731 7.04 4.864 11.648 6.4 4.608 1.621 9.429 2.432 14.464 2.432 8.021 0 13.909-1.877 17.664-5.632 3.755-3.755 5.632-9.472 5.632-17.152v-14.336l1.28-13.44-.64-13.568v-18.56h11.648v58.624c0 11.947-2.987 20.736-8.96 26.368-5.973 5.632-14.72 8.448-26.24 8.448Zm-1.536-28.416c-6.571 0-12.459-1.365-17.664-4.096-5.12-2.816-9.216-6.699-12.288-11.648-2.987-4.949-4.48-10.667-4.48-17.152 0-6.571 1.493-12.288 4.48-17.152 3.072-4.949 7.168-8.789 12.288-11.52 5.205-2.731 11.093-4.096 17.664-4.096 5.803 0 11.093 1.195 15.872 3.584 4.779 2.304 8.576 5.888 11.392 10.752 2.901 4.864 4.352 11.008 4.352 18.432 0 7.339-1.451 13.44-4.352 18.304-2.816 4.864-6.613 8.533-11.392 11.008-4.779 2.389-10.069 3.584-15.872 3.584Zm1.408-10.752c4.523 0 8.533-.939 12.032-2.816 3.499-1.877 6.229-4.48 8.192-7.808 2.048-3.328 3.072-7.168 3.072-11.52 0-4.352-1.024-8.192-3.072-11.52-1.963-3.328-4.693-5.888-8.192-7.68-3.499-1.877-7.509-2.816-12.032-2.816s-8.576.939-12.16 2.816c-3.499 1.792-6.272 4.352-8.32 7.68-1.963 3.328-2.944 7.168-2.944 11.52 0 4.352.981 8.192 2.944 11.52 2.048 3.328 4.821 5.931 8.32 7.808 3.584 1.877 7.637 2.816 12.16 2.816Z"}),(0,f.jsx)(u.Path,{fill:"#0076B9",d:"M228.523 201.561a5 5 0 0 1 1.447-7.4l11.54-6.661a5 5 0 0 1 6.83 1.83l50.17 86.906a4.732 4.732 0 0 1-7.834 5.27l-62.153-79.945Z"}),(0,f.jsx)(u.Path,{fill:"#000",fillOpacity:.2,d:"M228.523 201.561a5 5 0 0 1 1.447-7.4l11.54-6.661a5 5 0 0 1 6.83 1.83l50.17 86.906a4.732 4.732 0 0 1-7.834 5.27l-62.153-79.945Z"}),(0,f.jsx)(u.Path,{fill:"#0076B9",d:"M256.664 213.001A139 139 0 0 1 .512 150.914 138.998 138.998 0 0 1 168.54 3.175a139.003 139.003 0 0 1 73.756 42.814l-24.723 22.262A105.735 105.735 0 0 0 96.909 42.008 105.731 105.731 0 1 0 228.502 195.29l28.162 17.711Z"}),(0,f.jsx)(u.Path,{fill:"#000",fillOpacity:.2,d:"M256.664 213.001A139 139 0 0 1 .512 150.914 138.998 138.998 0 0 1 168.54 3.175a139.003 139.003 0 0 1 73.756 42.814l-24.723 22.262A105.735 105.735 0 0 0 96.909 42.008 105.731 105.731 0 1 0 228.502 195.29l28.162 17.711Z"})]}))};var m=n(939),y=n(4617);var j=n(6863),b=n(3743);function x(e){var t=e.title,n=e.onPress,r=e.disabled,a=function(e){var t=.1*r,n=(0,y.default)(),r=n.width,a=n.height,o=e?"rgba(0, 0, 0, 0.35)":"rgba(0, 118, 185, 0.35)";return m.default.create({button:{backgroundColor:o,borderRadius:14,minWidth:t,paddingVertical:10,paddingHorizontal:20,alignSelf:"right",marginVertical:10,marginRight:20,flex:1},buttonText:{fontFamily:"Montserrat-Regular",color:"#000000",fontSize:Math.min(.015*r,.06*a),textAlign:"center"}})}(r);return(0,f.jsx)(b.default,{style:a.button,onPress:n,disabled:r,children:(0,f.jsx)(j.default,{style:a.buttonText,children:t})})}function v(){return m.default.create({container:{flex:1,backgroundColor:"#FFFFFF",justifyContent:"center",alignItems:"center"},headerButton:{marginTop:30},containerMain:{flex:1,backgroundColor:"rgba(0, 118, 185, 0.35)",justifyContent:"center",alignItems:"center"},bottomLeft:{position:"absolute",bottom:20,left:20},topLeft:{position:"absolute",top:20,left:20},textContainer:{backgroundColor:"#FFFFFF",borderRadius:35,padding:30,shadowColor:"#000",shadowOffset:{width:2,height:2},shadowOpacity:.25,shadowRadius:3.84,elevation:7,position:"absolute",top:"30%",alignSelf:"auto",alignItems:"center",justifyContent:"center"},messageContainer:{backgroundColor:"#FFFFFF",borderRadius:35,padding:20,shadowColor:"#000",shadowOffset:{width:2,height:2},shadowOpacity:.25,shadowRadius:3.84,elevation:7,position:"absolute",top:"30%",width:"40%",height:"40%",justifyContent:"center",alignItems:"center"},text:{fontFamily:"Montserrat-Regular",color:"#000000",fontSize:24,textAlign:"center"},inputContainer:{width:"80%",alignItems:"center",justifyContent:"flex-start",paddingTop:20}})}var w=n(7158),O=(0,i.createContext)(),P=function(e){var t=e.children,n=(0,i.useState)(null),r=(0,a.default)(n,2),o=r[0],l=r[1];(0,i.useEffect)((function(){var e=localStorage.getItem("selectedImage");e&&l(JSON.parse(e))}),[]);return(0,f.jsx)(O.Provider,{value:{selectedImage:o,updateSelectedImage:function(e){l(e),localStorage.setItem("selectedImage",JSON.stringify(e))}},children:t})},C=(0,i.createContext)(),S=function(e){var t=e.children,n=(0,i.useState)(!1),r=(0,a.default)(n,2),l=r[0],s=r[1],c=(0,i.useState)(null),u=(0,a.default)(c,2),d=u[0],h=u[1],p=(0,i.useContext)(O).updateSelectedImage;(0,i.useEffect)((function(){g()}),[]);var g=function(){var e=(0,o.default)((function*(){try{var e=yield w.default.getItem("isLoggedIn"),t=yield w.default.getItem("user");"true"===e&&t&&(s(!0),h(JSON.parse(t)))}catch(n){console.error("\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u043f\u0440\u043e\u0432\u0435\u0440\u043a\u0435 \u0441\u0442\u0430\u0442\u0443\u0441\u0430 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f:",n)}}));return function(){return e.apply(this,arguments)}}(),m=function(){var e=(0,o.default)((function*(e){s(!0),h(e);try{yield w.default.clear(),yield w.default.setItem("isLoggedIn","true"),yield w.default.setItem("user",JSON.stringify(e))}catch(t){console.error("\u041e\u0448\u0438\u0431\u043a\u0440\u0430 \u043f\u0440\u0438 \u0432\u0445\u043e\u0434\u0435:",t)}}));return function(t){return e.apply(this,arguments)}}(),y=function(){var e=(0,o.default)((function*(){s(!1),h(null),p(null);try{yield w.default.removeItem("isLoggedIn"),yield w.default.removeItem("user"),yield w.default.clear()}catch(e){alert("\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0432\u044b\u0445\u043e\u0434\u0435:",e)}}));return function(){return e.apply(this,arguments)}}(),j={isLoggedIn:l,user:d,login:m,logout:y,updateUser:function(e){h(e)}};return(0,f.jsx)(C.Provider,{value:j,children:t})};const k=C;const D=function(e){var t=e.navigation,n=v();return(0,i.useContext)(k).isLoggedIn?(t.navigate("MainAuth"),null):(0,f.jsxs)(c.default,{style:n.container,children:[(0,f.jsx)(g,{}),(0,f.jsx)(c.default,{style:n.headerButton,children:(0,f.jsx)(x,{title:"\u041d\u0430\u0447\u0430\u0442\u044c",onPress:function(){return t.navigate("MainUnauth")}})})]})};var F=n(5987),M=n(2102),B=n(5729),I=n(7086),R=n(9830);function E(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function z(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?E(Object(n),!0).forEach((function(t){(0,r.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):E(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const T=function(e){return(0,f.jsx)(d(),z(z({xmlns:"http://www.w3.org/2000/svg",width:32,height:32,fill:"none"},e),{},{children:(0,f.jsx)(u.Path,{fill:"#7C858E",d:"M25.253 23.026 32 29.77 29.771 32l-6.745-6.747a14.114 14.114 0 0 1-8.849 3.102C6.351 28.355 0 22.003 0 14.177 0 6.351 6.351 0 14.177 0s14.178 6.351 14.178 14.177a14.114 14.114 0 0 1-3.102 8.849Zm-3.16-1.17a10.99 10.99 0 0 0 3.111-7.679c0-6.093-4.935-11.026-11.027-11.026-6.093 0-11.026 4.933-11.026 11.026 0 6.092 4.933 11.027 11.026 11.027a10.99 10.99 0 0 0 7.68-3.11l.236-.237Z"})}))};function L(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function A(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?L(Object(n),!0).forEach((function(t){(0,r.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):L(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const V=function(e){return(0,f.jsx)(d(),A(A({xmlns:"http://www.w3.org/2000/svg",width:33,height:33,fill:"none"},e),{},{children:(0,f.jsx)(u.Path,{stroke:"#000",strokeWidth:1.9,d:"m1 1 31 31M1 1v31M1 1h31m0 31H1m31 0V1M1 32 32 1"})}))};var W=n(1066);function U(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function H(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?U(Object(n),!0).forEach((function(t){(0,r.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):U(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const Z=function(e){return(0,f.jsx)(d(),H(H({xmlns:"http://www.w3.org/2000/svg",width:37,height:37,fill:"none"},e),{},{children:(0,f.jsx)(u.Path,{fill:"#fff",d:"M35.303 14.924v6.032H.704v-6.032h34.599ZM21.228.19v36.748h-6.414V.19h6.413Z"})}))};function _(e){var t=e.imageUrl,n=function(e){var t=(0,y.default)(),n=t.width,r=(t.height,e.profile),a=r?.08*n:.025*n,o=r?a:.025*n,i=r?a:.025*n,l=r?a:.08*n,s=r?a:.08*n;return m.default.create({container:{flexDirection:"row"},image:{width:o,height:i,borderRadius:100},round:{padding:5,borderRadius:100,marginRight:10,borderWidth:1,borderColor:"#0076B9"},nonePhoto:{height:s,width:l,backgroundColor:"#D9D9D9",borderRadius:100,justifyContent:"center",alignItems:"center"},info:{marginTop:10,flexDirection:"column"},nickname:{fontSize:20,fontWeight:"bold",marginBottom:5,marginTop:4},dateOfBirth:{fontSize:14,color:"#999999"}})}({profile:e.profile}),r=((0,i.useContext)(O).selectedImage,(0,i.useContext)(k).user);return(0,f.jsx)(c.default,{style:n.container,children:(0,f.jsx)(c.default,{style:n.round,children:function(){if(t&&t.startsWith("data:image"))return(0,f.jsx)(W.default,{style:n.image,source:{uri:t}});if(t)return(0,f.jsx)(W.default,{style:n.image,source:{uri:"data:image/jpeg;base64,"+t}});if(r.image){var e="data:image/jpeg;base64,"+r.image;return(0,f.jsx)(W.default,{style:n.image,source:{uri:e}})}return(0,f.jsx)(c.default,{style:n.nonePhoto,children:(0,f.jsx)(Z,{style:{transform:[{scale:.5}]}})})}()})})}function N(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function J(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?N(Object(n),!0).forEach((function(t){(0,r.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):N(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const G=function(e){var t=(0,y.default)(),n=t.width,r=t.height,a=Math.min(.093*n,.054*r);return(0,f.jsxs)(d(),J(J({xmlns:"http://www.w3.org/2000/svg",width:a,height:a,fill:"none"},e),{},{children:[(0,f.jsx)(u.Circle,{cx:a/2,cy:a/2,r:a/2-1,stroke:"#000",strokeWidth:2}),(0,f.jsx)(u.Path,{stroke:"#000",strokeWidth:2,d:"m"+.266*a+" "+.267*a+" "+.468*a+" "+.468*a+"m-"+.468*a+" 0 "+.468*a+"-"+.468*a})]}))};function $(e){var t=e.data,n=i.useState(!1),r=(0,a.default)(n,2),o=r[0],l=r[1],s=t.avatarUrl,u=t.username,d=t.onPress,h=t.containerStyle,p=t.main,g=t.id,x=function(){var e=(0,y.default)(),t=e.width,n=e.height;return m.default.create({container:{backgroundColor:"#FFFFFF",borderRadius:26,paddingVertical:12,paddingHorizontal:16},rowContainer:{flexDirection:"row",alignItems:"center",justifyContent:"space-between"},avatarContainer:{flexDirection:"row",alignItems:"center"},username:{fontFamily:"Montserrat-Regular",fontSize:Math.min(.012*t,.032*n),fontWeight:"bold",marginLeft:8},channelName:{fontFamily:"Montserrat-Regular",fontSize:Math.min(.012*t,.032*n),fontWeight:"bold"},deleteContainer:{marginLeft:"auto"}})}();return(0,f.jsx)(b.default,{style:[x.container,h,o&&!s&&{backgroundColor:"rgba(0, 118, 185, 0.35)"},o&&s&&{backgroundColor:"#E7DEDE"}],onPress:d,onMouseEnter:function(){return l(!0)},onMouseLeave:function(){return l(!1)},children:(0,f.jsxs)(c.default,{style:x.rowContainer,children:[s&&(0,f.jsxs)(c.default,{style:x.avatarContainer,children:[(0,f.jsx)(_,{imageUrl:s}),(0,f.jsx)(j.default,{style:x.username,children:u})]}),!s&&(0,f.jsx)(j.default,{style:x.channelName,children:u}),p&&(0,f.jsx)(c.default,{style:[x.deleteContainer,{transform:[{scale:.5}]}],children:(0,f.jsx)(b.default,{onPress:function(){fetch("https://linking-api.onrender.com/api/chats/delete/"+g,{method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Basic "+btoa("admin:root")}}).then((function(e){e.ok?(alert("\u0427\u0430\u0442 \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0443\u0434\u0430\u043b\u0451\u043d"),window.location.reload()):alert("\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u043e\u0441\u044c \u0443\u0434\u0430\u043b\u0438\u0442\u044c \u0447\u0430\u0442")})).catch((function(e){alert("\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0443\u0434\u0430\u043b\u0435\u043d\u0438\u0438 \u0447\u0430\u0442\u0430",e)}))},children:(0,f.jsx)(G,{})})})]})})}var Y=n(6460),q=["value","setValue","navigation","unauth"];function X(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function K(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?X(Object(n),!0).forEach((function(t){(0,r.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):X(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Q(e){var t=e.value,n=e.setValue,r=(e.navigation,e.unauth),l=(0,F.default)(e,q),s=(0,i.useState)(!1),u=(0,a.default)(s,2),d=u[0],h=u[1],p=(0,i.useState)(!1),g=(0,a.default)(p,2),j=g[0],b=g[1],x=(0,Y.useIsFocused)(),v=function(){var e=(0,y.default)(),t=e.width,n=e.height;return m.default.create({container:{flexDirection:"row",justifyContent:"center",alignItems:"center",backgroundColor:"#FFFFFF",width:.4*t,zIndex:0,width:644},icon:{position:"absolute",left:10,zIndex:1,transform:[{scale:.5}]},dismissIcon:{position:"absolute",right:10,top:"50%",transform:[{translateY:-17}],zIndex:2},dropdown:{position:"absolute",top:50,left:0,right:0,flex:1,maxHeight:.3*n,overflowY:"auto",backgroundColor:"#FFFFFF",borderRadius:10,boxShadow:"2px 2px 2px rgba(0, 0, 0, 1)",zIndex:1,padding:10},input:{flex:1,fontFamily:"Montserrat-Regular",height:44,width:.4*t,fontSize:Math.min(.01*t,.03*n),paddingLeft:10,paddingRight:10,borderRadius:10,backgroundColor:"#FFFFFF",color:"#000000",boxShadow:"2px 2px 2px rgba(0, 0, 0, 1)"}})}(),w=(0,Y.useNavigation)(),O="admin",P="root",C=(0,i.useState)([]),S=(0,a.default)(C,2),k=S[0],D=S[1],E=(0,i.useState)([]),z=(0,a.default)(E,2),L=z[0],A=z[1],W=(0,i.useState)(!0),U=(0,a.default)(W,2),H=U[0],Z=U[1],_=function(){var e=(0,o.default)((function*(){try{var e=yield fetch("https://linking-api.onrender.com/api/channels",{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Basic "+btoa(O+":"+P)}});if(e.ok){for(var t=yield e.json(),n=[],r=[],a=function*(){var e=t[o];n.push({name:e.name,onPress:function(){return t=e.id,void w.navigate("Channel",{channelId:t});var t},avatarUrl:null}),r.push({name:e.name,onPress:function(){return t=e.id,void w.navigate("ChannelUnauth",{channelId:t});var t},avatarUrl:null})},o=0;o<t.length;o++)yield*a();var i=yield fetch("https://linking-api.onrender.com/api/users",{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Basic "+btoa(O+":"+P)}});if(i.ok)for(var l=yield i.json(),s=function*(){var e=l[c];n.push({name:e.name,onPress:function(){return t=e,void w.navigate("Chat",{chatUser:t});var t},avatarUrl:e.image})},c=0;c<l.length;c++)yield*s();else alert("\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u043f\u043e\u0434\u0433\u0440\u0443\u0437\u043a\u0435 \u0434\u0430\u043d\u043d\u044b\u0445 \u0441 \u0441\u0435\u0440\u0432\u0435\u0440\u0430");D(n),A(r),Z(!1)}else alert("\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u043f\u043e\u0434\u0433\u0440\u0443\u0437\u043a\u0435 \u0434\u0430\u043d\u043d\u044b\u0445 \u0441 \u0441\u0435\u0440\u0432\u0435\u0440\u0430")}catch(u){console.error("\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u043f\u043e\u0434\u0433\u0440\u0443\u0437\u043a\u0435 \u0434\u0430\u043d\u043d\u044b\u0445 \u0441 \u0441\u0435\u0440\u0432\u0435\u0440\u0430",u)}}));return function(){return e.apply(this,arguments)}}();(0,i.useEffect)((function(){x&&d&&_()}),[x]);var N=t?(r?L:k).filter((function(e){return e.name.toLowerCase().includes(t.toLowerCase())})):r?L:k;return(0,f.jsxs)(c.default,{style:v.container,children:[(0,f.jsx)(c.default,{style:v.icon,children:(0,f.jsx)(T,{})}),(0,f.jsx)(M.default,K(K({},l),{},{placeholderTextColor:"#7C858E",value:t,style:[v.input,{paddingLeft:36}],onFocus:function(){h(!0),b(!0),_()},onChangeText:function(e){return n(e)}})),d&&(0,f.jsx)(B.default,{onPressIn:function(){n(""),h(!1),b(!1)},children:(0,f.jsx)(V,{style:v.dismissIcon})}),H&&j&&(0,f.jsx)(c.default,{style:v.dropdown,children:(0,f.jsx)(R.default,{size:"large",color:"rgba(0, 118, 185, 0.35)"})}),j&&!H&&(0,f.jsx)(I.default,{style:v.dropdown,children:N.map((function(e,t){return(0,f.jsx)($,{data:{avatarUrl:e.avatarUrl,username:e.name,onPress:e.onPress}},t)}))})]})}function ee(e){var t=e.navigation,n=v();return(0,f.jsxs)(c.default,{style:n.containerMain,children:[(0,f.jsx)(c.default,{style:n.messageContainer,children:(0,f.jsx)(j.default,{style:n.text,children:"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u0443\u0439\u0442\u0435\u0441\u044c, \u0447\u0442\u043e\u0431\u044b \u043d\u0430\u0447\u0430\u0442\u044c \u043e\u0431\u0449\u0430\u0442\u044c\u0441\u044f"})}),(0,f.jsx)(c.default,{style:n.bottomLeft,children:(0,f.jsx)(x,{title:"\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u043a\u0430\u043d\u0430\u043b",onPress:function(){return t.navigate("Auth")}})})]})}var te=["value","setValue","type","flex"];function ne(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function re(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ne(Object(n),!0).forEach((function(t){(0,r.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ne(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ae(e){var t,n=e.value,r=e.setValue,a=e.type,o=e.flex,i=(0,F.default)(e,te),l=function(){var e=(0,y.default)(),t=e.width,n=e.height;return m.default.create({container:{flexDirection:"row",justifyContent:"center",alignItems:"center",backgroundColor:"#FFFFFF",borderRadius:10},input:{flex:1,fontFamily:"Montserrat-Regular",height:Math.min(.03*t,.055*n),fontSize:Math.min(.01*t,.03*n),paddingLeft:40,borderRadius:10,backgroundColor:"#FFFFFF",color:"#000000",boxShadow:"2px 2px 2px rgba(0, 0, 0, 1)",width:"80%"}})}();switch(a){case"password":t={secureTextEntry:!0,autoCompleteType:"password",maxLength:26};break;case"nickname":t={maxLength:10};break;case"email":t={autoCompleteType:"email",keyboardType:"email-address",maxLength:55};break;case"code":t={keyboardType:"number-pad",maxLength:4};break;default:t={}}var s=o?"90%":600;return(0,f.jsx)(c.default,{style:[l.container,{width:s,height:44}],children:(0,f.jsx)(M.default,re(re(re({},i),t),{},{placeholderTextColor:"#7C858E",value:n,style:[l.input,{paddingLeft:21}],onChangeText:function(e){return r(e)}}))})}function oe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ie(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?oe(Object(n),!0).forEach((function(t){(0,r.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):oe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const le=function(e){var t=e.navigation,n=v(),r=(0,i.useState)({password:"",email:""}),o=(0,a.default)(r,2),l=o[0],s=o[1],u=l.email&&l.password,d=(0,i.useContext)(k).login,h=(0,i.useState)(!1),p=(0,a.default)(h,2),g=p[0],m=p[1];return(0,f.jsxs)(c.default,{style:n.containerMain,children:[g&&(0,f.jsx)(c.default,{style:n.textContainer,children:(0,f.jsx)(c.default,{style:{flex:1,alignItems:"center",justifyContent:"center"},children:(0,f.jsx)(R.default,{size:"large",color:"rgba(0, 118, 185, 0.35)"})})}),!g&&(0,f.jsxs)(c.default,{style:n.textContainer,children:[(0,f.jsxs)(c.default,{style:n.inputContainer,children:[(0,f.jsx)(c.default,{style:{marginBottom:20},children:(0,f.jsx)(ae,{value:l.email,setValue:function(e){return s(ie(ie({},l),{},{email:e}))},placeholder:"\u041f\u043e\u0447\u0442\u0430",type:"email",flex:!1})}),(0,f.jsx)(c.default,{style:{marginBottom:20},children:(0,f.jsx)(ae,{value:l.password,setValue:function(e){return s(ie(ie({},l),{},{password:e}))},placeholder:"\u041f\u0430\u0440\u043e\u043b\u044c",type:"password",flex:!1})})]}),(0,f.jsxs)(c.default,{style:{marginTop:20,marginRight:13},children:[(0,f.jsx)(b.default,{onPress:function(){return t.navigate("Forgot")},children:(0,f.jsx)(j.default,{style:{fontFamily:"Montserrat-Regular"},children:"\u0417\u0430\u0431\u044b\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u044c?"})}),(0,f.jsx)(c.default,{style:{borderBottomWidth:1,borderBottomColor:"black",width:"100%"}})]}),(0,f.jsx)(c.default,{children:(0,f.jsx)(x,{title:"\u0412\u043e\u0439\u0442\u0438",onPress:function(){if(/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/.test(l.email)){m(!0);var e={email:l.email,password:l.password};fetch("https://linking-api.onrender.com/api/login",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Basic "+btoa("admin:root")},body:JSON.stringify(e)}).then((function(e){e.ok?e.json().then((function(e){d(e)})):(e.json().then((function(e){var t=e.message||"Login failed";alert(t)})),m(!1))})).catch((function(e){alert("\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u044f \u043a \u0441\u0435\u0440\u0432\u0435\u0440\u0443",e)}))}else alert("\u041d\u0435 \u0432\u0435\u0440\u043d\u044b\u0439 \u0444\u043e\u0440\u043c\u0430\u0442 \u043f\u043e\u0447\u0442\u044b")},disabled:!u})}),(0,f.jsx)(c.default,{style:{marginBottom:13},children:(0,f.jsx)(x,{title:"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f",onPress:function(){return t.navigate("Reg")}})})]})]})};function se(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ce(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?se(Object(n),!0).forEach((function(t){(0,r.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):se(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const ue=function(e){var t=e.navigation,n=v(),r=(0,i.useState)({name:"",email:"",password:""}),o=(0,a.default)(r,2),l=o[0],s=o[1],u=l.name&&l.password&&l.email,d=(0,i.useState)(!1),h=(0,a.default)(d,2),p=h[0],g=h[1];return(0,f.jsxs)(c.default,{style:n.containerMain,children:[p&&(0,f.jsx)(c.default,{style:n.textContainer,children:(0,f.jsx)(c.default,{style:{flex:1,alignItems:"center",justifyContent:"center"},children:(0,f.jsx)(R.default,{size:"large",color:"rgba(0, 118, 185, 0.35)"})})}),!p&&(0,f.jsxs)(c.default,{style:n.textContainer,children:[(0,f.jsxs)(c.default,{style:n.inputContainer,children:[(0,f.jsx)(c.default,{style:{marginBottom:20},children:(0,f.jsx)(ae,{value:l.name,setValue:function(e){return s(ce(ce({},l),{},{name:e}))},placeholder:"\u041d\u0438\u043a\u043d\u0435\u0439\u043c",type:"nickname",flex:!1})}),(0,f.jsx)(c.default,{style:{marginBottom:20},children:(0,f.jsx)(ae,{value:l.email,setValue:function(e){return s(ce(ce({},l),{},{email:e}))},placeholder:"\u041f\u043e\u0447\u0442\u0430",type:"email",flex:!1})}),(0,f.jsx)(c.default,{style:{marginBottom:20},children:(0,f.jsx)(ae,{value:l.password,setValue:function(e){return s(ce(ce({},l),{},{password:e}))},placeholder:"\u041f\u0430\u0440\u043e\u043b\u044c",type:"password",flex:!1})})]}),(0,f.jsx)(c.default,{children:(0,f.jsx)(x,{title:"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f",onPress:function(){if(/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/.test(l.email)){if(/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d).{8,}$/.test(l.password)){g(!0);var e={name:l.name,email:l.email,password:l.password};fetch("https://linking-api.onrender.com/api/register",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Basic "+btoa("admin:root")},body:JSON.stringify(e)}).then((function(e){e.ok?t.navigate("Auth"):(e.json().then((function(e){var t=e.message;alert(t)})),g(!1))})).catch((function(e){alert("\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u0438 \u043a \u0441\u0435\u0440\u0432\u0435\u0440\u0443",e)}))}else alert("\u041d\u0435\u043f\u0440\u0430\u0432\u0438\u043b\u044c\u043d\u044b\u0439 \u0444\u043e\u0440\u043c\u0430\u0442 \u043f\u0430\u0440\u043e\u043b\u044f: \u043c\u0438\u043d\u0438\u043c\u0443\u043c 8 \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432 \u0432 \u0434\u043b\u0438\u043d\u0443, \u0434\u043e\u043b\u0436\u0435\u043d \u0441\u043e\u0434\u0435\u0440\u0436\u0430\u0442\u044c \u043c\u0438\u043d\u0438\u043c\u0443\u043c \u043e\u0434\u043d\u0443 \u0437\u0430\u0433\u043b\u0430\u0432\u043d\u0443\u044e \u0438 \u0441\u0442\u0440\u043e\u0447\u043d\u0443\u044e \u0431\u0443\u043a\u0432\u0443, \u043c\u0438\u043d\u0438\u043c\u0443\u043c \u043e\u0434\u043d\u0443 \u0446\u0438\u0444\u0440\u0443, \u0442\u0430\u043a\u0436\u0435 \u043c\u043e\u0436\u0435\u0442 \u0441\u043e\u0434\u0435\u0440\u0436\u0430\u0442\u044c \u0441\u043f\u0435\u0446\u0438\u0430\u043b\u044c\u043d\u044b\u0439 \u0441\u0438\u043c\u0432\u043e\u043b\u044b( !@#$%^&*)")}else alert("\u041d\u0435 \u043f\u0440\u0430\u0432\u0438\u043b\u044c\u043d\u044b\u0439 \u0444\u043e\u0440\u043c\u0430\u0442 \u043f\u043e\u0447\u0442\u044b")},disabled:!u})})]})]})};function de(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function fe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?de(Object(n),!0).forEach((function(t){(0,r.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):de(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const he=function(e){var t=e.navigation,n=v(),r=(0,i.useState)({newPassword:"",email:"",confirmPassword:"",code:""}),l=(0,a.default)(r,2),s=l[0],u=l[1],d="admin",h="root",p=(0,i.useState)(""),g=(0,a.default)(p,2),m=g[0],y=g[1],j=(0,i.useState)(!1),b=(0,a.default)(j,2),w=b[0],O=b[1],P=function(){var e=(0,o.default)((function*(e){try{var t=yield fetch("https://linking-api.onrender.com/api/users/email?email="+e,{headers:{"Content-Type":"application/json",Authorization:"Basic "+btoa(d+":"+h)}});if(t.ok)return yield t.json();alert("\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c \u0441 \u0443\u043a\u0430\u0437\u0430\u043d\u043d\u043e\u0439 \u043f\u043e\u0447\u0442\u043e\u0439 \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d"),O(!1)}catch(n){alert("\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u0438 \u043a \u0441\u0435\u0440\u0432\u0435\u0440\u0443",n)}}));return function(t){return e.apply(this,arguments)}}(),C=function(){var e=(0,o.default)((function*(e){try{var t=new URLSearchParams({new_password:s.newPassword}),n=yield fetch("https://linking-api.onrender.com/api/users/"+e+"/update/password?"+t.toString(),{method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Basic "+btoa(d+":"+h)},body:JSON.stringify({new_password:s.newPassword})});n.ok||(n.json().then((function(e){var t=e.message;alert(t)})),O(!1))}catch(r){alert("\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u0438 \u043a \u0441\u0435\u0440\u0432\u0435\u0440\u0443",r)}}));return function(t){return e.apply(this,arguments)}}(),S=function(){var e=(0,o.default)((function*(){if(/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d).{8,}$/.test(s.newPassword)){O(!0);try{var e=yield P(s.email);e?(yield C(e),alert("\u041f\u0430\u0440\u043e\u043b\u044c \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d"),O(!1)):(alert("\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c \u0441 \u0443\u043a\u0430\u0437\u0430\u043d\u043d\u043e\u0439 \u043f\u043e\u0447\u0442\u043e\u0439 \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d"),O(!1)),t.navigate("Auth")}catch(n){alert("\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u0438 \u043a \u0441\u0435\u0440\u0432\u0435\u0440\u0443:",n)}}else alert("\u041d\u0435\u043f\u0440\u0430\u0432\u0438\u043b\u044c\u043d\u044b\u0439 \u0444\u043e\u0440\u043c\u0430\u0442 \u043f\u0430\u0440\u043e\u043b\u044f: \u043c\u0438\u043d\u0438\u043c\u0443\u043c 8 \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432 \u0432 \u0434\u043b\u0438\u043d\u0443, \u0434\u043e\u043b\u0436\u0435\u043d \u0441\u043e\u0434\u0435\u0440\u0436\u0430\u0442\u044c \u043c\u0438\u043d\u0438\u043c\u0443\u043c \u043e\u0434\u043d\u0443 \u0437\u0430\u0433\u043b\u0430\u0432\u043d\u0443\u044e \u0438 \u0441\u0442\u0440\u043e\u0447\u043d\u0443\u044e \u0431\u0443\u043a\u0432\u0443, \u043c\u0438\u043d\u0438\u043c\u0443\u043c \u043e\u0434\u043d\u0443 \u0446\u0438\u0444\u0440\u0443, \u0442\u0430\u043a\u0436\u0435 \u043c\u043e\u0436\u0435\u0442 \u0441\u043e\u0434\u0435\u0440\u0436\u0430\u0442\u044c \u0441\u043f\u0435\u0446\u0438\u0430\u043b\u044c\u043d\u044b\u0439 \u0441\u0438\u043c\u0432\u043e\u043b\u044b( !@#$%^&*)")}));return function(){return e.apply(this,arguments)}}();return(0,f.jsxs)(c.default,{style:n.containerMain,children:[w&&(0,f.jsx)(c.default,{style:n.textContainer,children:(0,f.jsx)(c.default,{style:{flex:1,alignItems:"center",justifyContent:"center"},children:(0,f.jsx)(R.default,{size:"large",color:"rgba(0, 118, 185, 0.35)"})})}),!w&&(0,f.jsxs)(c.default,{style:n.textContainer,children:[(0,f.jsxs)(c.default,{style:n.inputContainer,children:[(0,f.jsx)(c.default,{style:{marginBottom:20},children:(0,f.jsx)(ae,{value:s.email,setValue:function(e){return u(fe(fe({},s),{},{email:e}))},placeholder:"\u041f\u043e\u0447\u0442\u0430",type:"email",flex:!1})}),(0,f.jsx)(c.default,{style:{marginBottom:20},children:(0,f.jsx)(ae,{value:s.newPassword,setValue:function(e){return u(fe(fe({},s),{},{newPassword:e}))},placeholder:"\u041d\u043e\u0432\u044b\u0439 \u043f\u0430\u0440\u043e\u043b\u044c",type:"password",flex:!1})}),(0,f.jsx)(c.default,{style:{marginBottom:20},children:(0,f.jsx)(ae,{value:s.confirmPassword,setValue:function(e){return u(fe(fe({},s),{},{confirmPassword:e}))},placeholder:"\u041f\u043e\u0434\u0442\u0432\u0435\u0440\u0434\u0438\u0442\u044c \u043f\u0430\u0440\u043e\u043b\u044c",type:"password",flex:!1})}),(0,f.jsx)(c.default,{style:{marginBottom:20},children:(0,f.jsx)(ae,{value:s.code,setValue:function(e){return u(fe(fe({},s),{},{code:e}))},placeholder:"\u041a\u043e\u0434",type:"code",flex:!1})})]}),(0,f.jsx)(c.default,{children:(0,f.jsx)(x,{title:"\u0418\u0437\u043c\u0435\u043d\u0438\u0442\u044c \u043f\u0430\u0440\u043e\u043b\u044c",onPress:S,disabled:!s.newPassword||!s.email||!s.confirmPassword||!s.code||s.newPassword!==s.confirmPassword||s.code!=m})}),(0,f.jsx)(c.default,{style:{marginBottom:13},children:(0,f.jsx)(x,{title:"\u041f\u043e\u043b\u0443\u0447\u0438\u0442\u044c \u043a\u043e\u0434",onPress:function(){if(/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/.test(s.email)){O(!0);var e=encodeURIComponent(s.email);fetch("https://linking-api.onrender.com/api/send_email?email="+e,{method:"GET",headers:{Authorization:"Basic "+btoa(d+":"+h)}}).then((function(e){return e.json()})).then((function(e){y(e),e?(alert("\u041a\u043e\u0434 \u043f\u043e\u0434\u0442\u0432\u0435\u0440\u0436\u0434\u0435\u043d\u0438\u044f \u0431\u044b\u043b \u043e\u0442\u043f\u0440\u0430\u0432\u043b\u0435\u043d \u043d\u0430 \u0443\u043a\u0430\u0437\u0430\u043d\u043d\u0443\u044e \u043f\u043e\u0447\u0442\u0443!"),O(!1)):(alert("\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u043e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c \u043a\u043e\u0434 \u043f\u043e\u0434\u0442\u0432\u0435\u0440\u0436\u0434\u0435\u043d\u0438\u044f"),O(!1))})).catch((function(e){alert("\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u0438 \u043a \u0441\u0435\u0440\u0432\u0435\u0440\u0443",e)}))}else alert("\u041d\u0435 \u0432\u0435\u0440\u043d\u044b\u0439 \u0444\u043e\u0440\u043c\u0430\u0442 \u043f\u043e\u0447\u0442\u044b")},disabled:!s.email})})]})]})};function pe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ge(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?pe(Object(n),!0).forEach((function(t){(0,r.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):pe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const me=function(e){return(0,f.jsxs)(d(),ge(ge({xmlns:"http://www.w3.org/2000/svg",width:70,height:70,fill:"none"},e),{},{children:[(0,f.jsx)(u.Path,{fill:"#0076B9",d:"M54.06 50.77a2.655 2.655 0 1 1 4.468-2.846l10.958 20.058a1.117 1.117 0 0 1-1.88 1.198L54.06 50.77Z"}),(0,f.jsx)(u.Path,{fill:"#000",fillOpacity:.2,d:"M54.06 50.77a2.655 2.655 0 1 1 4.468-2.846l10.958 20.058a1.117 1.117 0 0 1-1.88 1.198L54.06 50.77Z"}),(0,f.jsx)(u.Path,{fill:"#0076B9",d:"M59.711 52.364c-3.608 6.062-8.927 10.773-15.205 13.468a30.717 30.717 0 0 1-19.786 1.55c-6.586-1.687-12.504-5.518-16.918-10.952C3.387 50.997.7 44.235.119 37.1c-.58-7.134.974-14.282 4.445-20.432 3.472-6.15 8.683-10.993 14.9-13.844C25.681-.026 32.588-.74 39.21.781c6.622 1.521 12.624 5.203 17.158 10.525l-5.751 5.473c-3.45-4.048-8.015-6.849-13.052-8.007a23.38 23.38 0 0 0-15.02 1.555c-4.729 2.169-8.693 5.852-11.334 10.53-2.64 4.679-3.823 10.115-3.38 15.543.441 5.427 2.485 10.57 5.843 14.703 3.358 4.133 7.86 7.047 12.87 8.33a23.364 23.364 0 0 0 15.05-1.18c4.775-2.049 8.821-5.632 11.565-10.243l6.552 4.354Z"}),(0,f.jsx)(u.Path,{fill:"#000",fillOpacity:.2,d:"M59.711 52.364c-3.608 6.062-8.927 10.773-15.205 13.468a30.717 30.717 0 0 1-19.786 1.55c-6.586-1.687-12.504-5.518-16.918-10.952C3.387 50.997.7 44.235.119 37.1c-.58-7.134.974-14.282 4.445-20.432 3.472-6.15 8.683-10.993 14.9-13.844C25.681-.026 32.588-.74 39.21.781c6.622 1.521 12.624 5.203 17.158 10.525l-5.751 5.473c-3.45-4.048-8.015-6.849-13.052-8.007a23.38 23.38 0 0 0-15.02 1.555c-4.729 2.169-8.693 5.852-11.334 10.53-2.64 4.679-3.823 10.115-3.38 15.543.441 5.427 2.485 10.57 5.843 14.703 3.358 4.133 7.86 7.047 12.87 8.33a23.364 23.364 0 0 0 15.05-1.18c4.775-2.049 8.821-5.632 11.565-10.243l6.552 4.354Z"})]}))};var ye=n(6459),je=n(4710);function be(){var e=(0,y.default)(),t=e.width,n=e.height;return m.default.create({container:{flex:1,backgroundColor:"#FFFFFF",justifyContent:"center",alignItems:"center"},headerButton:{marginTop:30},channNameContainer:{flexDirection:"row",justifyContent:"center",alignItems:"center",top:80,paddingLeft:10,overflow:"hidden",position:"absolute"},dataInputContainer:{marginRight:10},nicknameContainer:{flexDirection:"row",alignItems:"center",marginBottom:13},containerMain:{flex:1,backgroundColor:"rgba(0, 118, 185, 0.35)",justifyContent:"center",alignItems:"center"},containerSettings:{flex:1,justifyContent:"center",flexDirection:"row",alignItems:"center",backgroundColor:"rgba(0, 118, 185, 0.35)"},bottomLeft:{position:"absolute",bottom:20,left:20},topLeft:{position:"absolute",top:20,left:20},textContainer:{backgroundColor:"#FFFFFF",borderRadius:35,padding:30,shadowColor:"#000",shadowOffset:{width:2,height:2},shadowOpacity:.25,shadowRadius:3.84,elevation:7,position:"absolute",top:"30%",alignSelf:"auto",alignItems:"center",justifyContent:"center"},messageContainer:{backgroundColor:"#FFFFFF",padding:2,borderRadius:35,marginBottom:10,width:"27%",height:"80%",overflow:"hidden",position:"absolute",top:Math.min(.25*t,.07*n),right:Math.min(.4*t,.9*n),shadowColor:"#000",shadowOffset:{width:2,height:2},shadowOpacity:.25,shadowRadius:3.84,elevation:7},barContainer:{backgroundColor:"#FFFFFF",borderTopLeftRadius:35,width:"100%",overflow:"hidden",position:"absolute",zIndex:1,top:0,right:0,shadowColor:"#000",shadowOffset:{width:2,height:2},shadowOpacity:.25,shadowRadius:3.84,elevation:7},barChanContainer:{backgroundColor:"#FFFFFF",zIndex:1,borderTopLeftRadius:35,width:"100%",height:"10%",overflow:"hidden",position:"absolute",top:0,right:0,shadowColor:"#000",shadowOffset:{width:2,height:2},shadowOpacity:.25,shadowRadius:3.84,elevation:7,flexDirection:"row",justifyContent:"space-between",alignItems:"center"},barText:{fontFamily:"Montserrat-Regular",fontSize:Math.min(.012*t,.032*n),paddingLeft:20},settingsContainer:{alignItems:"center",flex:1,backgroundColor:"#FFFFFF",borderRadius:35,padding:20,shadowColor:"#000",shadowOffset:{width:2,height:2},shadowOpacity:.25,shadowRadius:3.84,elevation:7,backgroundColor:"#FFFFFF",borderRadius:35,width:"30%",height:"40%",overflow:"hidden",position:"absolute"},sendContainer:{width:.4*t,height:.1*n,position:"absolute",bottom:0,right:.09*t,marginTop:50},forwardContainer:{backgroundColor:"#FFFFFF",padding:10,borderRadius:25,width:"30%",height:"81%",overflow:"hidden",position:"absolute",bottom:Math.min(.05*t,.15*n),right:Math.min(.008*t,.09*n),shadowColor:"#000",shadowOffset:{width:2,height:2},shadowOpacity:.25,shadowRadius:3.84,elevation:7},containerTop:{borderBottomWidth:1,borderBottomColor:"gray",paddingHorizontal:16,paddingTop:4,paddingBottom:5},containerBottom:{borderTopWidth:1,borderColor:"gray",borderBottomWidth:1,paddingHorizontal:16,paddingTop:4,paddingBottom:5},emptyContainer:{flex:1,justifyContent:"center",alignItems:"center",paddingHorizontal:16,paddingVertical:15},historyContainer:{backgroundColor:"#FFFFFF",paddingTop:.045*t,paddingBottom:.05*t,borderRadius:35,marginTop:30,width:"65%",height:"90%",overflow:"hidden",position:"absolute",top:"45%",right:.05*t,transform:[{translateY:"-50%"}],shadowColor:"#000",shadowOffset:{width:2,height:2},shadowOpacity:.25,shadowRadius:3.84,elevation:7},headerBar:{flexDirection:"row",alignItems:"center",justifyContent:"space-between",paddingHorizontal:16,paddingBottom:10,marginBottom:13,borderBottomWidth:1,borderBottomColor:"black"},headerText:{fontSize:Math.min(.012*t,.032*n),fontFamily:"Montserrat-Regular"},emptyMessageContainer:{top:Math.min(.15*t,.3*n),justifyContent:"center",alignItems:"center"},emptyMessageText:{fontSize:Math.min(.012*t,.032*n),fontFamily:"Montserrat-Regular",color:"gray"},profileContainer:{backgroundColor:"#FFFFFF",borderRadius:35,width:.2*t,height:.5*n,overflow:"hidden",position:"absolute",top:.04*t,left:.04*t,shadowColor:"#000",shadowOffset:{width:2,height:2},shadowOpacity:.25,shadowRadius:3.84,elevation:7,alignItems:"center",justifyContent:"center",paddingVertical:60},profileSettingsContainer:{backgroundColor:"#FFFFFF",borderRadius:35,width:.24*t,height:.68*n,overflow:"hidden",position:"absolute",shadowColor:"#000",shadowOffset:{width:2,height:2},shadowOpacity:.25,shadowRadius:3.84,elevation:7,alignItems:"center",justifyContent:"center",paddingTop:30,paddingBottom:30,alignSelf:"stretch",marginTop:"auto",marginBottom:"auto",left:"50%",top:"50%",transform:[{translateX:"-50%"},{translateY:"-50%"}]},popupContainer:{backgroundColor:"#E7DEDE",borderRadius:35,padding:20,shadowColor:"#000",shadowOffset:{width:2,height:2},shadowOpacity:.25,shadowRadius:3.84,elevation:7,position:"absolute",top:"50%",left:"50%",transform:[{translateX:"-50%"},{translateY:"-50%"}],width:"20%",height:"20%",justifyContent:"center",alignItems:"center",flexDirection:"column"},text:{fontFamily:"Montserrat-Regular",color:"#000000",fontSize:Math.min(.012*t,.032*n),textAlign:"center",marginBottom:13},inputContainer:{width:"80%",alignItems:"center",justifyContent:"flex-start",paddingTop:20}})}function xe(e){var t=e.data,n=t.onPress,r=t.text,a=function(){var e=(0,y.default)(),t=e.width,n=e.height;return m.default.create({button:{borderTopWidth:1,borderBottomWidth:1,borderColor:"#000000",paddingHorizontal:10,paddingVertical:15,width:.15*t,paddingHorizontal:15},text:{fontFamily:"Montserrat-Regular",fontSize:Math.min(.02*t,.045*n),color:"#000000",textAlign:"center"}})}();return(0,f.jsx)(b.default,{style:a.button,onPress:n,children:(0,f.jsx)(j.default,{style:a.text,children:r})})}const ve=function(e){var t=e.data,n=t.imageUrl,r=t.nickname,o=t.message,l=t.own,s=t.from,u=t.id,d=t.nav,h=t.answer,p=function(){var e=(0,y.default)(),t=e.width,n=e.height;return m.default.create({container:{flexDirection:"row",alignItems:"flex-end"},avatar:{alignSelf:"flex-start"},messageBox:{marginLeft:15,flex:1,backgroundColor:"#E7DEDE",borderLeftWidth:5,borderLeftColor:"#0076B9",paddingVertical:10,paddingHorizontal:15,marginBottom:10,maxWidth:"40%",borderTopRightRadius:10,borderBottomRightRadius:10},ownMessageBox:{backgroundColor:"rgba(0, 118, 185, 0.35)",borderLeftColor:"#0076B9",borderLeftWidth:5,marginLeft:15,flex:1,paddingVertical:10,paddingHorizontal:15,marginBottom:10,maxWidth:"40%",borderTopRightRadius:10,borderBottomRightRadius:10},nickname:{fontSize:Math.min(.012*t,.032*n),fontFamily:"Montserrat-Regular",color:"black",fontWeight:"bold",marginBottom:5},ownNickname:{fontSize:Math.min(.012*t,.032*n),fontFamily:"Montserrat-Regular",color:"black",fontWeight:"bold",marginBottom:5},message:{fontSize:Math.min(.01*t,.03*n),fontFamily:"Montserrat-Regular",color:"black",flexWrap:"wrap",marginBottom:10},ownMessage:{fontSize:Math.min(.01*t,.03*n),fontFamily:"Montserrat-Regular",color:"black",flexWrap:"wrap",marginBottom:10},bubbleTail:{position:"absolute",bottom:0,left:-14,width:5,height:0,borderStyle:"solid",borderTopWidth:10,borderRightWidth:0,borderBottomWidth:0,borderLeftWidth:10,borderTopColor:"#0076B9",borderBottomColor:"transparent",borderRightColor:"transparent",borderLeftColor:"transparent",transform:[{rotate:"90deg"}]}})}(),g=(0,i.useState)(!1),x=(0,a.default)(g,2),v=x[0],w=x[1],O=(0,i.useContext)(k).user,P=(0,i.useState)(!1),C=(0,a.default)(P,2),S=C[0],D=C[1],F=(0,y.default)(),M=F.width,I=F.height,R=(0,Y.useNavigation)();return(0,f.jsxs)(c.default,{style:p.container,children:[l?null:(0,f.jsx)(_,{imageUrl:n,profile:!1,style:p.avatar}),(0,f.jsxs)(B.default,{style:[p.messageBox,l&&p.ownMessageBox],onPress:function(){w(!v)},children:[v&&(0,f.jsx)(B.default,{onPress:function(){var e=O.id,t=u;w(!1),fetch("https://linking-api.onrender.com/api/saved_message/delete?user_id="+e+"&message_id="+t,{method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Basic "+btoa("admin:root")}}).then((function(e){e.ok?window.location.reload():alert("\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u0443\u0434\u0430\u043b\u0438\u0442\u044c \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435")})).catch((function(e){alert("\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0443\u0434\u0430\u043b\u0435\u043d\u0438\u0438 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u044f",e)}))},children:(0,f.jsx)(j.default,{style:{fontFamily:"Montserrat-Italic"},children:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c"})}),(0,f.jsx)(j.default,{style:[p.nickname,l&&p.ownNickname],children:r}),(0,f.jsx)(j.default,{style:[p.message,l&&p.ownMessage],children:o}),(0,f.jsx)(b.default,{onPress:function(){h?R.navigate("Chat",{chatUser:d}):R.navigate("Channel",{channelId:d})},onMouseEnter:function(){D(!0)},onMouseLeave:function(){D(!1)},children:(0,f.jsxs)(j.default,{style:{fontFamily:"Montserrat-Italic",fontSize:Math.min(.008*M,.025*I),color:S?"white":"black"},children:["Forwarded from: ",s]})}),!l&&(0,f.jsx)(c.default,{style:p.bubbleTail})]})]})};function we(e){return Oe.apply(this,arguments)}function Oe(){return(Oe=(0,o.default)((function*(e){try{yield w.default.setItem("profile_nickname",e)}catch(t){console.log("\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0441\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u0438\u0438 \u043d\u0438\u043a\u043d\u0435\u0439\u043c\u0430:",t)}}))).apply(this,arguments)}function Pe(){return Ce.apply(this,arguments)}function Ce(){return(Ce=(0,o.default)((function*(){try{return yield w.default.getItem("profile_nickname")}catch(e){return console.log("\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u043f\u043e\u0434\u0433\u0440\u0443\u0437\u043a\u0435 \u043d\u0438\u043a\u043d\u0435\u0439\u043c\u0430:",e),null}}))).apply(this,arguments)}function Se(){return(Se=(0,o.default)((function*(e){try{yield w.default.setItem("profile_email",e)}catch(t){console.log("\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0441\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u0438\u0438 \u043f\u043e\u0447\u0442\u044b:",t)}}))).apply(this,arguments)}function ke(){return(ke=(0,o.default)((function*(){try{return yield w.default.getItem("profile_email")}catch(e){return console.log("\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u043f\u043e\u0434\u0433\u0440\u0443\u0437\u043a\u0435 \u043f\u043e\u0447\u0442\u044b:",e),null}}))).apply(this,arguments)}function De(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Fe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?De(Object(n),!0).forEach((function(t){(0,r.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):De(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Me(e){var t,n,r=e.navigation,l=be(),s=(0,i.useState)(!1),u=(0,a.default)(s,2),d=u[0],h=u[1],p=(0,i.useState)({nickname:""}),g=(0,a.default)(p,2),m=g[0],v=g[1],w=(0,i.useContext)(k),P=w.user,C=w.updateUser,S=w.logout,D=(0,i.useState)(""),F=(0,a.default)(D,2),M=F[0],B=F[1],E="admin",z="root",T=(0,i.useCallback)((function(e){return C(e)}),[C]),L=(0,i.useContext)(O).selectedImage,A=(0,y.default)(),V=A.width,W=A.height,U=(0,i.useState)(!0),H=(0,a.default)(U,2),Z=H[0],N=H[1];(0,Y.useFocusEffect)(i.useCallback((function(){J(),q()}),[]));var J=function(){var e=(0,o.default)((function*(){N(!0);try{var e=yield fetch("https://linking-api.onrender.com/api/users/"+P.id,{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Basic "+btoa(E+":"+z)}});if(e.ok){var t=yield e.json();T(t),N(!1)}else console.log("\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u043f\u043e\u0434\u0433\u0440\u0443\u0437\u0438\u0442\u044c \u0434\u0430\u043d\u043d\u044b\u0435 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f")}catch(n){alert("\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u0438 \u043a \u0441\u0435\u0440\u0432\u0435\u0440\u0443",n)}}));return function(){return e.apply(this,arguments)}}(),q=function(){var e=(0,o.default)((function*(){try{var e=yield Pe();e&&e!==M&&B(e)}catch(t){}}));return function(){return e.apply(this,arguments)}}(),X=function(){var e=(0,o.default)((function*(){N(!0);try{(yield fetch("https://linking-api.onrender.com/api/saved_message/delete_all?user_id="+(null==P?void 0:P.id),{method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Basic "+btoa(E+":"+z)}})).ok?(console.log("\u0421\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u044f \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0443\u0434\u0430\u043b\u0435\u043d\u044b!"),window.location.reload()):console.log("\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u0443\u0434\u0430\u043b\u0438\u0442\u044c \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u044f!")}catch(e){alert("\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u0438 \u043a \u0441\u0435\u0440\u0432\u0435\u0440\u0443",e)}}));return function(){return e.apply(this,arguments)}}(),K=m.nickname,Q=[{onPress:function(e){return(0,ye.default)(e),r.navigate("Profile")},text:"\u041c\u043e\u0439 \u0430\u043a\u043a\u0430\u0443\u043d\u0442"},{onPress:function(){S(),window.location.reload()},text:"\u0412\u044b\u0439\u0442\u0438"}],ee=function(){var e=(0,o.default)((function*(){try{(yield fetch("https://linking-api.onrender.com/api/channels/create",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Basic "+btoa(E+":"+z)},body:JSON.stringify({username:P.name,channelName:m.nickname})})).ok?(h(!1),alert("\u041a\u0430\u043d\u0430\u043b \u0441\u043e\u0437\u0434\u0430\u043d"),window.location.reload()):alert("\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u0441\u043e\u0437\u0434\u0430\u0442\u044c \u043a\u0430\u043d\u0430\u043b")}catch(e){alert("\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u0438 \u043a \u0441\u0435\u0440\u0432\u0435\u0440\u0443",e)}}));return function(){return e.apply(this,arguments)}}();return(0,f.jsxs)(c.default,{style:l.containerMain,children:[(0,f.jsxs)(c.default,{style:l.messageContainer,children:[(0,f.jsx)(c.default,{style:l.containerTop,children:(0,f.jsx)(j.default,{style:l.headerText,children:"\u0412\u0430\u0448\u0438 \u0447\u0430\u0442\u044b"})}),Z&&(0,f.jsx)(c.default,{style:{flex:1,alignItems:"center",justifyContent:"center"},children:(0,f.jsx)(R.default,{size:"large",color:"rgba(0, 118, 185, 0.35)"})}),!Z&&(0,f.jsx)(f.Fragment,{children:P.chats.length>0?(0,f.jsx)(I.default,{style:{flex:1,scrollbarWidth:0,flexDirection:"column"},children:P.chats.map((function(e){return e.recipient.name===P.name?(0,f.jsx)($,{data:{avatarUrl:e.sender.image,username:e.sender.name,onPress:function(){return r.navigate("Chat",{chatUser:e.sender})},main:!0,id:e.id}},e.id):(0,f.jsx)($,{data:{avatarUrl:e.recipient.image,username:e.recipient.name,onPress:function(){return r.navigate("Chat",{chatUser:e.recipient})},main:!0,id:e.id}},e.id)}))}):(0,f.jsx)(c.default,{style:l.emptyContainer,children:(0,f.jsx)(j.default,{style:l.emptyMessageText,children:"\u0423 \u0432\u0430\u0441 \u043d\u0435\u0442 \u0447\u0430\u0442\u043e\u0432"})})}),(0,f.jsx)(c.default,{style:l.containerBottom,children:(0,f.jsx)(j.default,{style:l.headerText,children:"\u0412\u0430\u0448\u0438 \u043a\u0430\u043d\u0430\u043b\u044b"})}),Z&&(0,f.jsx)(c.default,{style:{flex:1,alignItems:"center",justifyContent:"center"},children:(0,f.jsx)(R.default,{size:"large",color:"rgba(0, 118, 185, 0.35)"})}),!Z&&(0,f.jsx)(f.Fragment,{children:P.channels.length>0?(0,f.jsx)(I.default,{style:{flex:1,scrollbarWidth:0,flexDirection:"column"},children:P.channels.map((function(e){return(0,f.jsx)($,{data:{username:e.name,onPress:function(){return r.navigate("Channel",{channelId:e.id})}}},e.id)}))}):(0,f.jsx)(c.default,{style:l.emptyContainer,children:(0,f.jsx)(j.default,{style:l.emptyMessageText,children:"\u0412\u044b \u043d\u0435 \u0441\u043e\u0441\u0442\u043e\u0438\u0442\u0435 \u0432 \u043a\u0430\u043a\u0438\u0445-\u043b\u0438\u0431\u043e \u043a\u0430\u043d\u0430\u043b\u0430\u0445"})})})]}),(0,f.jsxs)(c.default,{style:l.profileContainer,children:[(0,f.jsx)(_,{imageUrl:L,profile:!0}),Z&&(0,f.jsxs)(j.default,{style:{color:"#000000",fontSize:Math.min(.03*V,.055*W),textAlign:"center",marginBottom:13,fontFamily:"Montserrat-Regular"},children:[" ",(0,f.jsx)(R.default,{size:"large",color:"rgba(0, 118, 185, 0.35)"})]}),!Z&&(0,f.jsxs)(j.default,{style:{color:"#000000",fontSize:Math.min(.03*V,.055*W),textAlign:"center",marginBottom:13,fontFamily:"Montserrat-Regular"},children:[" ",P.name]}),Q.map((function(e,t){return(0,f.jsx)(c.default,{style:{width:"70%"},children:(0,f.jsx)(xe,{data:e})},t)}))]}),(0,f.jsxs)(c.default,{style:l.forwardContainer,children:[(0,f.jsxs)(c.default,{style:l.headerBar,children:[(0,f.jsx)(j.default,{style:l.headerText,children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0451\u043d\u043d\u044b\u0435 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u044f"}),(null==P||null==(t=P.savedMessages)?void 0:t.length)>0&&!Z&&(0,f.jsx)(b.default,{onPress:X,children:(0,f.jsx)(G,{})})]}),Z&&(0,f.jsx)(c.default,{style:{flex:1,alignItems:"center",justifyContent:"center"},children:(0,f.jsx)(R.default,{size:"large",color:"rgba(0, 118, 185, 0.35)"})}),!Z&&(0,f.jsx)(f.Fragment,{children:(null==P||null==(n=P.savedMessages)?void 0:n.length)>0?(0,f.jsx)(I.default,{style:{flex:1,scrollbarWidth:0,flexDirection:"column"},children:P.savedMessages.map((function(e){var t,n,r,a,o,i;return(0,f.jsx)(c.default,{style:{marginBottom:13},children:(0,f.jsx)(ve,{data:{imageUrl:null==(t=e.sender)?void 0:t.image,nickname:null==(n=e.sender)?void 0:n.name,message:e.data,own:(null==(r=e.sender)?void 0:r.name)===P.name,from:e.chat?(null==(a=e.chat.sender)?void 0:a.name)===P.name?e.chat.recipient.name:e.chat.sender.name:e.channel.name,id:e.id,nav:e.chat?(null==(o=e.chat.sender)?void 0:o.name)===P.name?e.chat.recipient:e.chat.sender:null==(i=P.channels.find((function(t){return t.name===e.channel.name})))?void 0:i.id,answer:!!e.chat}},e.id)})}))}):(0,f.jsx)(I.default,{style:{flex:1,scrollbarWidth:0,flexDirection:"column"},children:(0,f.jsx)(c.default,{style:l.emptyMessageContainer,children:(0,f.jsx)(j.default,{style:l.emptyMessageText,children:"\u0423 \u0432\u0430\u0441 \u043d\u0435\u0442 \u0441\u043e\u0445\u0440\u0430\u043d\u0451\u043d\u043d\u044b\u0445 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0439"})})})})]}),(0,f.jsx)(c.default,{style:l.bottomLeft,children:(0,f.jsx)(x,{title:"\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u043a\u0430\u043d\u0430\u043b",onPress:function(){return h(!0)}})}),(0,f.jsx)(je.default,{visible:d,transparent:!0,children:(0,f.jsxs)(c.default,{style:l.popupContainer,children:[(0,f.jsx)(j.default,{style:l.text,children:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u043a\u0430\u043d\u0430\u043b\u0430"}),(0,f.jsx)(c.default,{style:{marginBottom:13,alignItems:"center"},children:(0,f.jsx)(ae,{value:m.nickname,setValue:function(e){return v(Fe(Fe({},m),{},{nickname:e}))},placeholder:"",type:"nickname",flex:!0})}),(0,f.jsx)(b.default,{onPress:function(){return h(!1)},children:(0,f.jsx)(x,{title:"\u0421\u043e\u0437\u0434\u0430\u0442\u044c",onPress:ee,disabled:!K})})]})})]})}function Be(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ie(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Be(Object(n),!0).forEach((function(t){(0,r.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Be(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const Re=function(e){return(0,f.jsxs)(d(),Ie(Ie({xmlns:"http://www.w3.org/2000/svg",width:50,height:50,fill:"none"},e),{},{children:[(0,f.jsxs)(u.G,{clipPath:"url(#a)",children:[(0,f.jsx)(u.Circle,{cx:25,cy:25,r:25,fill:"#00F"}),(0,f.jsx)(u.Path,{fill:"#fff",d:"M24.846 22.692A4.161 4.161 0 0 1 29 26.846v.004a4.154 4.154 0 1 1-7.09-2.939 3.986 3.986 0 0 1 2.876-1.22h.063-.003v.001Zm10.154-6h.055c1.002 0 1.908.414 2.554 1.081l.001.001a3.547 3.547 0 0 1 1.082 2.555v.058-.003 12.924A3.693 3.693 0 0 1 35 37H14.692A3.693 3.693 0 0 1 11 33.308V20.33c0-1.002.414-1.908 1.081-2.554l.001-.001a3.547 3.547 0 0 1 2.555-1.082h.058-.003 3.23l.735-1.962c.212-.507.557-.922.993-1.213l.01-.006A2.55 2.55 0 0 1 21.15 13h7.387c.542.01 1.067.19 1.499.517l-.006-.005c.445.297.791.712.996 1.201l.007.018.735 1.962L35 16.692ZM24.846 33.308l.091.001a6.206 6.206 0 0 0 4.472-1.896l.002-.002a6.205 6.205 0 0 0 1.897-4.474l-.001-.096v.005l.001-.092a6.206 6.206 0 0 0-1.896-4.472l-.002-.002a6.421 6.421 0 0 0-4.565-1.897 6.424 6.424 0 0 0-4.565 1.896 6.206 6.206 0 0 0-1.896 4.57v-.005l-.001.094c0 1.755.726 3.34 1.894 4.471l.002.002a6.205 6.205 0 0 0 4.474 1.897l.097-.001h-.005l.001.001Z"})]}),(0,f.jsx)(u.Defs,{children:(0,f.jsx)(u.ClipPath,{id:"a",children:(0,f.jsx)(u.Path,{fill:"#fff",d:"M0 0h50v50H0z"})})})]}))};var Ee=n(9108),ze=n(8113),Te=n(5211);function Le(e){var t=e.placeholderImageSource,n=e.selectedImage,r=e.isAvatar,a=function(){var e=(0,y.default)(),t=e.width,n=(e.height,.0845*t),r=.0845*t;return m.default.create({Avatarimage:{width:n,height:r,borderRadius:100}})}(),o=null!==n?{uri:n}:t;return(0,f.jsx)(Te.Image,{source:o,style:r&&a.Avatarimage})}var Ae=["children"];function Ve(e){e.children,(0,F.default)(e,Ae);var t=(0,i.useContext)(O).updateSelectedImage,n=function(){var e=(0,y.default)(),t=e.width,n=(e.height,.0845*t),r=.0845*t;return m.default.create({container:{flex:1,justifyContent:"center",flexDirection:"row"},hovered:{opacity:.3,position:"absolute",top:0,left:0,right:0,bottom:0,display:"flex",alignItems:"center",justifyContent:"center"},round:{padding:5,borderRadius:100,marginRight:10,borderWidth:1,borderColor:"#0076B9"},image:{width:n,height:r,borderRadius:100},nonePhoto:{height:r,width:n,backgroundColor:"#D9D9D9",borderRadius:100,justifyContent:"center",alignItems:"center"}})}(),r=(0,i.useState)(null),l=(0,a.default)(r,2),s=(l[0],l[1]),u=(0,i.useState)(null),d=(0,a.default)(u,2),h=(d[0],d[1]),p=(0,i.useState)(!1),g=(0,a.default)(p,2),j=g[0],b=g[1],x=(0,i.useContext)(k),v=x.user,w=(x.updateUser,"data:image/jpeg;base64,"+v.image);(0,i.useEffect)((function(){(0,o.default)((function*(){var e=yield Ee.requestMediaLibraryPermissionsAsync();s("granted"===e.status)}))()}));var P=function(){var e=(0,o.default)((function*(){var e=yield Ee.launchImageLibraryAsync({allowsEditing:!0,quality:1});e.canceled||C(e)}));return function(){return e.apply(this,arguments)}}(),C=function(){var e=(0,o.default)((function*(e){var n=new FormData,r=yield fetch(e.uri),a=yield r.blob();n.append("file",a,"file.jpg");var o="https://linking-api.onrender.com/api/users/"+(null==v?void 0:v.id)+"/update/image";try{var i=yield ze.default.put(o,n,{headers:{"Content-Type":"multipart/form-data",Authorization:"Basic "+btoa("admin:root")}});200!==i.status&&201!==i.status||(h(e.uri),t(e.uri))}catch(l){l.response&&l.response.data&&l.response.data.message&&alert("\u041e\u0448\u0438\u0431\u043a\u0430 "+l.response.data.message)}}));return function(t){return e.apply(this,arguments)}}(),S=function(){var e=(0,o.default)((function*(){if(!1!==(yield Ee.requestCameraPermissionsAsync()).granted){var e=yield Ee.launchCameraAsync();e.canceled||(h(e.assets[0].uri),C(e.assets[0]))}}));return function(){return e.apply(this,arguments)}}();return(0,f.jsx)(c.default,{style:n.container,children:(0,f.jsxs)(c.default,{style:n.round,children:[(0,f.jsxs)(B.default,{onPress:P,onMouseEnter:function(){b(!0)},onMouseLeave:function(){b(!1)},children:[!v.image&&(0,f.jsx)(c.default,{style:n.nonePhoto,children:j?(0,f.jsx)(Z,{}):null}),v.image&&(0,f.jsx)(c.default,{children:j?(0,f.jsx)(c.default,{style:n.nonePhoto,children:(0,f.jsx)(Z,{})}):(0,f.jsx)(Le,{style:n.image,isAvatar:!0,selectedImage:w})})]}),(0,f.jsx)(c.default,{style:{position:"absolute",bottom:0,right:0},children:(0,f.jsx)(B.default,{onPress:S,children:(0,f.jsx)(Re,{})})})]})})}function We(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ue(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?We(Object(n),!0).forEach((function(t){(0,r.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):We(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const He=function(e){return(0,f.jsxs)(d(),Ue(Ue({xmlns:"http://www.w3.org/2000/svg",width:104,height:105,fill:"none"},e),{},{children:[(0,f.jsx)(u.G,{filter:"url(#a)",children:(0,f.jsx)(u.Rect,{width:96,height:96,x:4,y:.444,fill:"#fff",rx:12})}),(0,f.jsx)(u.Path,{stroke:"#000",strokeLinecap:"round",strokeWidth:3,d:"M39.5 15.444 18 36.944m0 0 21.5 21.5M18 36.944h52.5c18 0 14.5 21.5 14.5 21.5s2 22-14.5 22H18"}),(0,f.jsx)(u.Defs,{})]}))};var Ze=["value","setValue","flex"];function _e(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ne(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_e(Object(n),!0).forEach((function(t){(0,r.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_e(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Je(e){var t,n=e.value,r=e.setValue,a=e.flex,o=(0,F.default)(e,Ze),i=function(){var e=(0,y.default)(),t=e.width,n=e.height;return m.default.create({container:{justifyContent:"center",alignItems:"center",backgroundColor:"#FFFFFF"},input:{flex:1,height:Math.min(.03*t,.055*n),fontFamily:"Montserrat-Regular",fontSize:Math.min(.03*t,.055*n),paddingLeft:"5%",backgroundColor:"#FFFFFF",color:"#000000",width:"70%"}})}(),l=(0,y.default)(),s=l.width,u=l.height;t={maxLength:10};var d=a?"20%":.2*s,h=a?44:.06*u;return(0,f.jsx)(c.default,{style:[i.container,{width:d,height:h}],children:(0,f.jsx)(M.default,Ne(Ne(Ne({},o),t),{},{maxLength:10,placeholderTextColor:"#7C858E",value:n,style:[i.input,{paddingLeft:.5*h}],onChangeText:function(e){return r(e)}}))})}function Ge(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function $e(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ge(Object(n),!0).forEach((function(t){(0,r.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ge(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const Ye=function(e){return(0,f.jsxs)(d(),$e($e({xmlns:"http://www.w3.org/2000/svg",width:44,height:42,fill:"none"},e),{},{children:[(0,f.jsx)(u.Path,{fill:"#373535",d:"M1 40.444v-8.5l24.5-23 8.5 8-24.5 23.5H1ZM38 12.944l-8.5-8s2.5-2.5 4.5-3.5 4 0 4 0 4 1.5 4 3.5.5 3 0 4-4 4-4 4Z"}),(0,f.jsx)(u.Path,{stroke:"#373535",strokeWidth:1.9,d:"M1 40.444v-8.5l24.5-23 8.5 8-24.5 23.5H1ZM38 12.944l-8.5-8s2.5-2.5 4.5-3.5 4 0 4 0 4 1.5 4 3.5.5 3 0 4-4 4-4 4Z"})]}))};function qe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Xe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?qe(Object(n),!0).forEach((function(t){(0,r.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):qe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ke(e){var t=e.navigation,n=be(),r=(0,i.useContext)(O).selectedImage,l=(0,i.useContext)(k).user,s=(0,i.useState)({name:(null==l?void 0:l.name)||""}),u=(0,a.default)(s,2),d=u[0],h=u[1],p=(0,y.default)(),g=p.width,m=p.height,v=(0,i.useState)(""),P=(0,a.default)(v,2),C=P[0],S=P[1],D=Math.min(9e-4*g,.001*m),F=(Math.min(6e-4*g,.001*m),(0,i.useState)(!0)),M=(0,a.default)(F,2),I=(M[0],M[1]);(0,Y.useFocusEffect)(i.useCallback((function(){R(),G()}),[l]));var R=function(){var e=(0,o.default)((function*(){try{var e=yield function(){return ke.apply(this,arguments)}();e&&e!==C?S(e):e||C||S((null==l?void 0:l.email)||"")}catch(t){console.log("\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u043f\u043e\u0434\u0433\u0440\u0443\u0437\u043a\u0435 \u043f\u043e\u0447\u0442\u044b:",t)}}));return function(){return e.apply(this,arguments)}}(),E=(0,i.useRef)(null),z=(0,i.useState)(36),T=(0,a.default)(z,2),L=T[0],A=T[1],V=(0,i.useState)(!1),W=(0,a.default)(V,2),U=W[0],H=W[1],Z=(0,i.useState)(0),_=(0,a.default)(Z,2),N=(_[0],_[1]);(0,i.useEffect)((function(){J(),G()}),[]);var J=function(){var e=E.current.offsetWidth,t=Math.min(.02*g,.045*m),n=Math.min(t,300/e*t);A(n)},G=function(){var e=(0,o.default)((function*(){try{(yield w.default.getItem("profile_nickname"))&&h({name:l.name})}catch(e){console.log("Error fetching saved nickname:",e)}}));return function(){return e.apply(this,arguments)}}(),$=function(){var e=(0,o.default)((function*(e){try{var t=null==l?void 0:l.id;if(t)(yield fetch("https://linking-api.onrender.com/api/users/"+t+"/update/name?name="+encodeURIComponent(e),{method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Basic "+btoa("admin:root")}})).ok||(alert("\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u043e\u0431\u043d\u043e\u0432\u0438\u0442\u044c \u0438\u043c\u044f \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f"),we(l.name),I(!1),H(!0),N(90))}catch(n){alert("\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u0438 \u043a \u0441\u0435\u0440\u0432\u0435\u0440\u0443",n)}}));return function(t){return e.apply(this,arguments)}}(),q=function(){var e=(0,o.default)((function*(){if(U){H(!1),N(0);try{if(d.name!==l.name)try{yield $(d.name)}catch(e){return console.log("\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0438 \u0438\u043c\u0435\u043d\u0438 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f:",e),H(!0),void N(90)}}catch(e){console.log("\u041e\u0448\u0438\u0431\u043a\u0430 \u0441\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u0438\u044f \u043d\u0438\u043a\u043d\u0435\u0439\u043c\u0430:",e)}try{yield we(d.name)}catch(e){console.log("\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u043f\u043e\u0434\u0433\u0440\u0443\u0437\u043a\u0435 \u043d\u0438\u043a\u043d\u0435\u0439\u043c\u0430:",e)}}else H(!0),N(90)}));return function(){return e.apply(this,arguments)}}();return(0,f.jsxs)(c.default,{style:n.containerMain,children:[(0,f.jsxs)(c.default,{style:n.profileSettingsContainer,children:[(0,f.jsx)(c.default,{style:{marginBottom:13},children:(0,f.jsx)(Ve,{children:r})}),(0,f.jsxs)(c.default,{style:n.nicknameContainer,children:[U?(0,f.jsx)(Je,{value:d.name,setValue:function(e){return h(Xe(Xe({},d),{},{name:e}))},flex:!1}):(0,f.jsx)(j.default,{style:{fontSize:Math.min(.03*g,.055*m),fontFamily:"Montserrat-Regular",paddingHorizontal:30},children:d.name}),(0,f.jsx)(c.default,{children:(0,f.jsx)(B.default,{onPress:q,children:(0,f.jsx)(Ye,{style:{transform:"rotate("+(U?360:0)+"deg) scale("+D+")",transition:"transform 0.5s ease"}})})})]}),(0,f.jsx)(c.default,{style:{borderTopWidth:1,borderBottomWidth:1,borderColor:"#000000",paddingHorizontal:10,paddingVertical:15,width:.2*g,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",marginBottom:13},children:(0,f.jsx)(c.default,{ref:E,onLayout:J,children:(0,f.jsx)(j.default,{style:{color:"#000000",fontSize:L,textAlign:"center",fontFamily:"Montserrat-Regular",marginBottom:13},children:C||l.email})})}),(0,f.jsx)(c.default,{style:{alignItems:"center",width:"100%",marginLeft:20},children:(0,f.jsx)(x,{title:"\u0418\u0437\u043c\u0435\u043d\u0438\u0442\u044c \u043f\u043e\u0447\u0442\u0443",onPress:function(){return t.navigate("ChangeEmail")}})}),(0,f.jsx)(c.default,{style:{marginBottom:13,alignItems:"center",width:"100%",marginLeft:20},children:(0,f.jsx)(x,{title:"\u0418\u0437\u043c\u0435\u043d\u0438\u0442\u044c \u043f\u0430\u0440\u043e\u043b\u044c",onPress:function(){return t.navigate("ChangePassword")}})})]}),(0,f.jsx)(c.default,{style:[n.topLeft,{transform:[{scale:D}]}],children:(0,f.jsx)(b.default,{onPress:function(){return t.navigate("MainAuth")},children:(0,f.jsx)(He,{})})})]})}function Qe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function et(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Qe(Object(n),!0).forEach((function(t){(0,r.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Qe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const tt=function(e){var t=e.navigation,n=v(),r=(0,i.useState)({email:"",code:""}),l=(0,a.default)(r,2),s=l[0],u=l[1],d=(0,i.useState)(""),h=(0,a.default)(d,2),p=h[0],g=h[1],m=(0,i.useContext)(k).user,j="admin",w="root",O=(0,y.default)(),P=O.width,C=O.height,S=Math.min(9e-4*P,.001*C),D=(0,i.useState)(!1),F=(0,a.default)(D,2),M=F[0],B=F[1],I=function(){var e=(0,o.default)((function*(){if(/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/.test(s.email)){B(!0);try{var e="https://linking-api.onrender.com/api/users/"+(null==m?void 0:m.id)+"/update/email?email="+encodeURIComponent(s.email);(yield fetch(e,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Basic "+btoa(j+":"+w)}})).ok?(alert("\u041f\u043e\u0447\u0442\u0430 \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u0430"),function(e){Se.apply(this,arguments)}(s.email),B(!1)):(alert("\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u043e\u0431\u043d\u043e\u0432\u0438\u0442\u044c \u043f\u043e\u0447\u0442\u0443"),B(!1))}catch(t){alert("\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u0438 \u043a \u0441\u0435\u0440\u0432\u0435\u0440\u0443",t)}}else alert("\u041d\u0435 \u043f\u0440\u0430\u0432\u0438\u043b\u044c\u043d\u044b\u0439 \u0444\u043e\u0440\u043c\u0430\u0442 \u043f\u043e\u0447\u0442\u044b")}));return function(){return e.apply(this,arguments)}}();return(0,f.jsxs)(c.default,{style:n.containerMain,children:[M&&(0,f.jsx)(c.default,{style:n.textContainer,children:(0,f.jsx)(c.default,{style:{flex:1,alignItems:"center",justifyContent:"center"},children:(0,f.jsx)(R.default,{size:"large",color:"rgba(0, 118, 185, 0.35)"})})}),!M&&(0,f.jsxs)(c.default,{style:n.textContainer,children:[(0,f.jsxs)(c.default,{style:n.inputContainer,children:[(0,f.jsx)(c.default,{style:{marginBottom:20},children:(0,f.jsx)(ae,{value:s.email,setValue:function(e){return u(et(et({},s),{},{email:e}))},placeholder:"\u041f\u043e\u0447\u0442\u0430",type:"email",flex:!1})}),(0,f.jsx)(c.default,{style:{marginBottom:20},children:(0,f.jsx)(ae,{value:s.code,setValue:function(e){return u(et(et({},s),{},{code:e}))},placeholder:"\u041a\u043e\u0434",type:"code",flex:!1})})]}),(0,f.jsx)(c.default,{children:(0,f.jsx)(x,{title:"\u0418\u0437\u043c\u0435\u043d\u0438\u0442\u044c \u043f\u043e\u0447\u0442\u0443",onPress:I,disabled:!s.email||!s.code||s.code!=p})}),(0,f.jsx)(c.default,{style:{marginBottom:13},children:(0,f.jsx)(x,{title:"\u041f\u043e\u043b\u0443\u0447\u0438\u0442\u044c \u043a\u043e\u0434",onPress:function(){B(!0);var e=encodeURIComponent(s.email);fetch("https://linking-api.onrender.com/api/send_email?email="+e,{method:"GET",headers:{Authorization:"Basic "+btoa(j+":"+w)}}).then((function(e){return e.json()})).then((function(e){g(e),e?(alert("\u041a\u043e\u0434 \u043f\u043e\u0434\u0442\u0432\u0435\u0440\u0436\u0434\u0435\u043d\u0438\u044f \u0431\u044b\u043b \u043e\u0442\u043f\u0440\u0430\u0432\u043b\u0435\u043d \u043d\u0430 \u0443\u043a\u0430\u0437\u0430\u043d\u043d\u0443\u044e \u043f\u043e\u0447\u0442\u0443!"),B(!1)):(alert("\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u043e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c \u043a\u043e\u0434"),B(!0))})).catch((function(e){alert("\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u0438 \u043a \u0441\u0435\u0440\u0432\u0435\u0440\u0443",e)}))},disabled:!s.email})})]}),(0,f.jsx)(c.default,{style:[n.topLeft,{transform:[{scale:S}]}],children:(0,f.jsx)(b.default,{onPress:function(){return t.navigate("Profile")},children:(0,f.jsx)(He,{})})})]})};function nt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function rt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?nt(Object(n),!0).forEach((function(t){(0,r.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):nt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const at=function(e){var t=e.navigation,n=v(),r=(0,i.useState)({newPassword:"",password:"",confirmPassword:""}),l=(0,a.default)(r,2),s=l[0],u=l[1],d=(0,i.useContext)(k).user,h=(0,i.useState)(!1),p=(0,a.default)(h,2),g=p[0],m=p[1],j=(0,y.default)(),w=j.width,O=j.height,P=Math.min(9e-4*w,.001*O),C=function(){var e=(0,o.default)((function*(){if(s.newPassword!==s.confirmPassword)return alert("\u041d\u043e\u0432\u044b\u0439 \u043f\u0430\u0440\u043e\u043b\u044c \u043d\u0435 \u0441\u043e\u0432\u043f\u0430\u0434\u0430\u0435\u0442 \u0441 \u043f\u043e\u043b\u0435\u043c \u043f\u043e\u043b\u0435\u043c \u043f\u043e\u0434\u0442\u0432\u0435\u0440\u0436\u0434\u0435\u043d\u0438\u044f");var e=/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d).{8,}$/;if(e.test(s.password)||e.test(s.newPassword)){m(!0);var t=null==d?void 0:d.id,n=new URLSearchParams({last_password:s.password,new_password:s.newPassword});try{(yield fetch("https://linking-api.onrender.com/api/users/"+t+"/update/password?"+n.toString(),{method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Basic "+btoa("admin:root")}})).ok?(alert("\u041f\u0430\u0440\u043e\u043b\u044c \u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d"),m(!1)):(alert("\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u043e\u0431\u043d\u043e\u0432\u0438\u0442\u044c \u043f\u0430\u0440\u043e\u043b\u044c"),m(!1))}catch(r){alert("\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u0438 \u043a \u0441\u0435\u0440\u0432\u0435\u0440\u0443",r)}}else alert("\u041d\u0435\u043f\u0440\u0430\u0432\u0438\u043b\u044c\u043d\u044b\u0439 \u0444\u043e\u0440\u043c\u0430\u0442 \u043f\u0430\u0440\u043e\u043b\u044f: \u043c\u0438\u043d\u0438\u043c\u0443\u043c 8 \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432 \u0432 \u0434\u043b\u0438\u043d\u0443, \u0434\u043e\u043b\u0436\u0435\u043d \u0441\u043e\u0434\u0435\u0440\u0436\u0430\u0442\u044c \u043c\u0438\u043d\u0438\u043c\u0443\u043c \u043e\u0434\u043d\u0443 \u0437\u0430\u0433\u043b\u0430\u0432\u043d\u0443\u044e \u0438 \u0441\u0442\u0440\u043e\u0447\u043d\u0443\u044e \u0431\u0443\u043a\u0432\u0443, \u043c\u0438\u043d\u0438\u043c\u0443\u043c \u043e\u0434\u043d\u0443 \u0446\u0438\u0444\u0440\u0443, \u0442\u0430\u043a\u0436\u0435 \u043c\u043e\u0436\u0435\u0442 \u0441\u043e\u0434\u0435\u0440\u0436\u0430\u0442\u044c \u0441\u043f\u0435\u0446\u0438\u0430\u043b\u044c\u043d\u044b\u0439 \u0441\u0438\u043c\u0432\u043e\u043b\u044b( !@#$%^&*)")}));return function(){return e.apply(this,arguments)}}();return(0,f.jsxs)(c.default,{style:n.containerMain,children:[g&&(0,f.jsx)(c.default,{style:n.textContainer,children:(0,f.jsx)(c.default,{style:{flex:1,alignItems:"center",justifyContent:"center"},children:(0,f.jsx)(R.default,{size:"large",color:"rgba(0, 118, 185, 0.35)"})})}),!g&&(0,f.jsxs)(c.default,{style:n.textContainer,children:[(0,f.jsxs)(c.default,{style:n.inputContainer,children:[(0,f.jsx)(c.default,{style:{marginBottom:20},children:(0,f.jsx)(ae,{value:s.password,setValue:function(e){return u(rt(rt({},s),{},{password:e}))},placeholder:"\u041f\u0430\u0440\u043e\u043b\u044c",type:"password",flex:!1})}),(0,f.jsx)(c.default,{style:{marginBottom:20},children:(0,f.jsx)(ae,{value:s.newPassword,setValue:function(e){return u(rt(rt({},s),{},{newPassword:e}))},placeholder:"\u041d\u043e\u0432\u044b\u0439 \u043f\u0430\u0440\u043e\u043b\u044c",type:"password",flex:!1})}),(0,f.jsx)(c.default,{style:{marginBottom:20},children:(0,f.jsx)(ae,{value:s.confirmPassword,setValue:function(e){return u(rt(rt({},s),{},{confirmPassword:e}))},placeholder:"\u041f\u043e\u0434\u0442\u0432\u0435\u0440\u0434\u0438\u0442\u044c \u043f\u0430\u0440\u043e\u043b\u044c",type:"password",flex:!1})})]}),(0,f.jsx)(c.default,{children:(0,f.jsx)(x,{title:"\u0418\u0437\u043c\u0435\u043d\u0438\u0442\u044c \u043f\u0430\u0440\u043e\u043b\u044c",onPress:C,disabled:!s.newPassword||!s.password||!s.confirmPassword})})]}),(0,f.jsx)(c.default,{style:[n.topLeft,{transform:[{scale:P}]}],children:(0,f.jsx)(b.default,{onPress:function(){return t.navigate("Profile")},children:(0,f.jsx)(He,{})})})]})};function ot(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function it(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ot(Object(n),!0).forEach((function(t){(0,r.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ot(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const lt=function(e){return(0,f.jsx)(d(),it(it({xmlns:"http://www.w3.org/2000/svg",width:15,height:21,fill:"none"},e),{},{children:(0,f.jsx)(u.Path,{stroke:"#000",d:"M14 1H1v18l6.24-5.4L14 19V1Z"})}))};function st(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ct(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?st(Object(n),!0).forEach((function(t){(0,r.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):st(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const ut=function(e){return(0,f.jsxs)(d(),ct(ct({xmlns:"http://www.w3.org/2000/svg",width:15,height:21,fill:"none"},e),{},{children:[(0,f.jsx)(u.Path,{fill:"#0076B9",d:"M14 1H1v18l6.24-5.4L14 19V1Z"}),(0,f.jsx)(u.Path,{fill:"#000",fillOpacity:.2,d:"M14 1H1v18l6.24-5.4L14 19V1Z"}),(0,f.jsx)(u.Path,{stroke:"#0076B9",d:"M14 1H1v18l6.24-5.4L14 19V1Z"}),(0,f.jsx)(u.Path,{stroke:"#000",strokeOpacity:.2,d:"M14 1H1v18l6.24-5.4L14 19V1Z"})]}))};var dt=n(2982),ft=(0,i.createContext)(),ht=function(e){var t=e.children,n=(0,i.useState)([]),r=(0,a.default)(n,2),o=r[0],l=r[1];(0,i.useEffect)((function(){var e=localStorage.getItem("forwardedMessages");e&&l(JSON.parse(e))}),[]),(0,i.useEffect)((function(){localStorage.setItem("forwardedMessages",JSON.stringify(o))}),[o]);return(0,f.jsx)(ft.Provider,{value:{forwardedMessages:o,addForwardedMessage:function(e){l((function(t){return[].concat((0,dt.default)(t),[e])}))},clearForwardedMessages:function(){l([])}},children:t})};const pt=function(e){var t=e.data,n=(e.currentUser,t.imageUrl),r=t.nickname,l=t.role,s=t.message,u=t.own,d=t.channel,h=t.date,p=t.unauth,g=t.ident,b=(0,i.useState)(!1),x=(0,a.default)(b,2),v=x[0],w=x[1],O=new Date(h).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),P="admin",C="root",S=(0,i.useContext)(k).user,D=function(){var e=(0,y.default)(),t=e.width,n=e.height;return m.default.create({container:{marginTop:10,flexDirection:"row",alignItems:"flex-end",marginBottom:10,maxWidth:"100%"},ownContainer:{flexDirection:"row-reverse",alignItems:"flex-end",marginBottom:10,maxWidth:"100%"},avatar:{alignSelf:"flex-start"},messageBox:{backgroundColor:"#E7DEDE",paddingVertical:10,paddingHorizontal:15,maxWidth:"60%",borderTopLeftRadius:10,borderBottomLeftRadius:10,borderBottomRightRadius:10,position:"relative"},box:{borderTopRightRadius:10,borderBottomRightRadius:10,borderTopLeftRadius:10},ownMessageBox:{backgroundColor:"rgba(0, 118, 185, 0.35)",paddingVertical:10,paddingHorizontal:15,maxWidth:"60%",borderTopRightRadius:10,borderBottomRightRadius:10,borderTopLeftRadius:10,position:"relative"},forward:{alignSelf:"flex-end",marginBottom:5},ownForward:{alignSelf:"flex-start",marginBottom:5},nickname:{fontSize:Math.min(.012*t,.032*n),fontFamily:"Montserrat-Bold",fontWeight:"bold",color:"black",marginBottom:5},role:{fontSize:Math.min(.012*t,.032*n),fontFamily:"Montserrat-Regular",color:"#0076B9",marginBottom:5},message:{fontSize:Math.min(.01*t,.03*n),fontFamily:"Montserrat-Regular",color:"black",flexWrap:"wrap",marginBottom:5},time:{fontSize:Math.min(.008*t,.025*n),fontFamily:"Montserrat-Regular",color:"black",alignSelf:"flex-end"},ownTime:{fontSize:Math.min(.008*t,.025*n),fontFamily:"Montserrat-Regular",color:"black",alignSelf:"flex-start"},bubbleTail:{position:"absolute",top:0,left:-10,width:0,height:0,borderTopWidth:10,borderTopColor:"transparent",borderBottomWidth:10,borderBottomColor:"transparent",borderRightWidth:10,borderRightColor:"#E7DEDE"},ownBubbleTail:{position:"absolute",top:0,right:-10,width:0,height:0,borderTopWidth:10,borderTopColor:"transparent",borderBottomWidth:10,borderBottomColor:"transparent",borderLeftWidth:10,borderLeftColor:"rgba(0, 118, 185, 0.35)"}})}(),F=v?(0,f.jsx)(ut,{}):(0,f.jsx)(lt,{}),M=[D.messageBox,u?D.ownMessageBox:D.box,{borderTopRightRadius:10,borderBottomRightRadius:u?0:10,borderBottomLeftRadius:10,borderTopLeftRadius:u?10:0}],I=function(){var e=(0,o.default)((function*(){if(w((function(e){return!e})),v){var e=S.id,t=g;try{(yield fetch("https://linking-api.onrender.com/api/saved_message/delete?user_id="+e+"&message_id="+t,{method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Basic "+btoa(P+":"+C)}})).ok||alert("\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u0443\u0434\u0430\u043b\u0438\u0442\u044c \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435")}catch(r){console.log("\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0443\u0434\u0430\u043b\u0435\u043d\u0438\u0438 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u044f",r)}}else{var n={username:S.name,messageId:g};try{(yield fetch("https://linking-api.onrender.com/api/saved_message/save",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Basic "+btoa(P+":"+C)},body:JSON.stringify(n)})).ok||alert("\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u0441\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435")}catch(r){console.log("\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0441\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u0438\u0438 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u044f",r)}}}));return function(){return e.apply(this,arguments)}}();return(0,f.jsxs)(c.default,{style:u?D.ownContainer:D.container,children:[!u&&n&&(0,f.jsx)(c.default,{style:D.avatar,children:(0,f.jsx)(_,{imageUrl:n,profile:!1})}),(0,f.jsxs)(c.default,{style:M,children:[!p&&(0,f.jsx)(B.default,{onPress:I,children:(0,f.jsx)(c.default,{style:u?D.ownForward:D.forward,children:F})}),(0,f.jsx)(j.default,{style:D.nickname,children:r}),d&&(0,f.jsx)(j.default,{style:D.role,children:l}),(0,f.jsx)(j.default,{style:D.message,children:s}),(0,f.jsx)(j.default,{style:u?D.ownTime:D.time,children:O}),u&&(0,f.jsx)(c.default,{style:D.ownBubbleTail}),!u&&(0,f.jsx)(c.default,{style:D.bubbleTail})]})]})};function gt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function mt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?gt(Object(n),!0).forEach((function(t){(0,r.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):gt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const yt=function(e){var t=(0,y.default)(),n=t.width,r=t.height,a=Math.min(.093*n,.054*r);return(0,f.jsxs)(d(),mt(mt({xmlns:"http://www.w3.org/2000/svg",width:a,height:a,fill:"none"},e),{},{children:[(0,f.jsx)(u.G,{filter:"url(#a)",children:(0,f.jsx)(u.Circle,{cx:a/2,cy:.46875*a,r:.46875*a,fill:"#fff"})}),(0,f.jsx)(u.Path,{stroke:"#0076B9",strokeWidth:.05*a,d:"M"+.09375*a+" "+.46875*a+"L"+.65625*a+" "+.09375*a+"V"+.84375*a+"Z"}),(0,f.jsx)(u.Path,{stroke:"#0076B9",strokeWidth:.05*a,d:"M"+.66*a+" "+.46875*a+"L"+.1*a+" "+.46875*a}),(0,f.jsx)(u.Defs,{})]}))};const jt=function(e){var t=e.curuser,n=e.chanInf,r=e.channel,l=e.onMessageSent,s=(0,i.useState)(""),u=(0,a.default)(s,2),d=u[0],h=u[1],p=function(){var e=(0,y.default)(),t=e.width,n=e.height;return m.default.create({container:{flexDirection:"row",alignItems:"flex-end",paddingVertical:20},input:{flex:1,height:Math.min(.03*t,.055*n),fontSize:Math.min(.01*t,.03*n),paddingLeft:40,paddingVertical:5,borderRadius:10,backgroundColor:"#FFFFFF",color:"#000000",boxShadow:"2px 2px 2px rgba(0, 0, 0, 1)",fontFamily:"Montserrat-Regular",alignSelf:"flex-start",marginRight:30},sendButton:{transform:[{rotate:"180deg"}],alignSelf:"flex-end",marginLeft:30,alignItems:"center",justifyContent:"center"}})}(),g="admin",j="root",b=(0,i.useRef)(null),x=function(){var e=(0,o.default)((function*(){if(d)try{if(r){var e={currentUsername:t,message:d,channelName:n.channel.name};h(""),(yield fetch("https://linking-api.onrender.com/api/channels/add_message",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Basic "+btoa(g+":"+j)},body:JSON.stringify(e)})).ok?l():alert("\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u043e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435")}else{var a={currentUsername:t,otherUsername:n,message:d};h(""),(yield fetch("https://linking-api.onrender.com/api/chats/add_message",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Basic "+btoa(g+":"+j)},body:JSON.stringify(a)})).ok?l():alert("\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u043e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435")}}catch(o){alert("\u041e\u0448\u0438\u0431\u043a\u0430 \u043e\u0442\u043f\u0440\u0430\u0432\u043a\u0438",o)}}));return function(){return e.apply(this,arguments)}}();return(0,f.jsxs)(c.default,{style:p.container,children:[(0,f.jsx)(M.default,{ref:b,style:p.input,placeholder:"\u0421\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435",value:d,onChangeText:h,multiline:!0,numberOfLines:4,onKeyPress:function(e){"Enter"!==e.key||e.shiftKey||(e.preventDefault(),x())}}),(0,f.jsx)(B.default,{style:p.sendButton,onPress:x,children:(0,f.jsx)(yt,{})})]})};function bt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function xt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?bt(Object(n),!0).forEach((function(t){(0,r.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):bt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function vt(e){var t=e.navigation,n=e.route,r=(0,y.default)(),l=r.width,s=r.height,u=n.params.chatUser,d=be(),h=(0,i.useState)(!1),p=(0,a.default)(h,2),g=p[0],m=p[1],v=(0,i.useState)({nickname:""}),w=(0,a.default)(v,2),P=w[0],C=w[1],S=(0,i.useContext)(k).user,D=(0,i.useContext)(k).logout,F=(0,i.useContext)(O).selectedImage,M=(0,i.useState)([]),B=(0,a.default)(M,2),E=(B[0],B[1],(0,i.useState)([])),z=(0,a.default)(E,2),T=z[0],L=z[1],A="admin",V="root",W=(0,i.useState)(""),U=(0,a.default)(W,2),H=U[0],Z=U[1],N=(0,i.useState)(!0),J=(0,a.default)(N,2),G=J[0],q=J[1],X=function(){var e=(0,o.default)((function*(){try{(yield fetch("https://linking-api.onrender.com/api/channels/create",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Basic "+btoa(A+":"+V)},body:JSON.stringify({username:S.name,channelName:P.nickname})})).ok?(m(!1),alert("\u041a\u0430\u043d\u0430\u043b \u0441\u043e\u0437\u0434\u0430\u043d"),window.location.reload()):alert("\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u0441\u043e\u0437\u0434\u0430\u0442\u044c \u043a\u0430\u043d\u0430\u043b")}catch(e){alert("\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u0438 \u043a \u0441\u0435\u0440\u0432\u0435\u0440\u0443",e)}}));return function(){return e.apply(this,arguments)}}(),K=(0,i.useState)(!0),Q=(0,a.default)(K,2),ee=Q[0],te=Q[1];(0,Y.useFocusEffect)(i.useCallback((function(){re(),te(!0)}),[])),(0,i.useEffect)((function(){ee&&ne().then((function(){return te(!1)})).catch((function(e){return alert("\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u0438 \u043a \u0441\u0435\u0440\u0432\u0435\u0440\u0443:",e)}))}),[ee]),(0,i.useEffect)((function(){var e=setInterval((function(){te(!0)}),1e3);return function(){return clearInterval(e)}}),[]);var ne=function(){var e=(0,o.default)((function*(){var e="https://linking-api.onrender.com/api/chats/usernames?first_user="+S.name+"&second_user="+u.name;try{var t=yield fetch(e,{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Basic "+btoa(A+":"+V)}});if(!t.ok)throw new Error("\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u043f\u043e\u0434\u0433\u0440\u0443\u0437\u043a\u0435 \u0447\u0430\u0442\u0430, \u0432\u043e\u0437\u043c\u043e\u0436\u043d\u043e \u0435\u0433\u043e \u0435\u0449\u0435 \u043d\u0435 \u0441\u0443\u0449\u0435\u0441\u0442\u0432\u0443\u0435\u0442");var n=yield t.json();L(n),q(!1)}catch(r){}}));return function(){return e.apply(this,arguments)}}(),re=function(){var e=(0,o.default)((function*(){try{var e=yield Pe();e&&e!==H&&Z(e)}catch(t){console.log("\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u043f\u043e\u0434\u0433\u0440\u0443\u0437\u043a\u0435 \u043d\u0438\u043a\u043d\u0435\u0439\u043c\u0430",t)}}));return function(){return e.apply(this,arguments)}}(),oe=F||S&&S.image,ie=P.nickname,le=[{onPress:function(e){return(0,ye.default)(e),t.navigate("Profile")},text:"\u041c\u043e\u0439 \u0430\u043a\u043a\u0430\u0443\u043d\u0442"},{onPress:function(){D(),window.location.reload()},text:"\u0412\u044b\u0439\u0442\u0438"}];return(0,f.jsxs)(c.default,{style:d.containerMain,children:[(0,f.jsxs)(c.default,{style:d.profileContainer,children:[(0,f.jsx)(_,{imageUrl:oe,profile:!0}),(0,f.jsx)(j.default,{style:{color:"#000000",fontSize:Math.min(.03*l,.055*s),textAlign:"center",marginBottom:13,fontFamily:"Montserrat-Regular"},children:S.name}),le.map((function(e,t){return(0,f.jsx)(c.default,{style:{width:"70%"},children:(0,f.jsx)(xe,{data:e})},t)}))]}),(0,f.jsxs)(c.default,{style:d.historyContainer,children:[(0,f.jsx)(c.default,{style:d.barContainer,children:(0,f.jsx)($,{data:{avatarUrl:u.image,username:u.name,onPress:ne}})}),G&&(0,f.jsx)(c.default,{style:{flex:1,alignItems:"center",justifyContent:"center"},children:(0,f.jsx)(R.default,{size:"large",color:"rgba(0, 118, 185, 0.35)"})}),!G&&(0,f.jsx)(I.default,{style:{flex:1,scrollbarWidth:0,flexDirection:"column"},children:null==T?void 0:T.map((function(e){var t,n;return(0,f.jsx)(pt,{data:{imageUrl:null==(t=e.sender)?void 0:t.image,nickname:e.sender.name,message:e.data,date:e.date,own:(null==(n=e.sender)?void 0:n.name)===S.name,channel:!1,unauth:!1,ident:e.id},currentUser:S},e.id)}))}),(0,f.jsx)(c.default,{style:d.sendContainer,children:(0,f.jsx)(jt,{channel:!1,curuser:S.name,chanInf:u.name,onMessageSent:function(){te(!0)}})})]}),(0,f.jsx)(c.default,{style:d.bottomLeft,children:(0,f.jsx)(x,{title:"\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u043a\u0430\u043d\u0430\u043b",onPress:function(){return m(!0)}})}),(0,f.jsx)(je.default,{visible:g,transparent:!0,children:(0,f.jsxs)(c.default,{style:d.popupContainer,children:[(0,f.jsx)(j.default,{style:d.text,children:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u043a\u0430\u043d\u0430\u043b\u0430"}),(0,f.jsx)(c.default,{style:{marginBottom:13,alignItems:"center"},children:(0,f.jsx)(ae,{value:P.nickname,setValue:function(e){return C(xt(xt({},P),{},{nickname:e}))},placeholder:"",type:"nickname",flex:!0})}),(0,f.jsx)(c.default,{children:(0,f.jsx)(b.default,{onPress:function(){return m(!1)},children:(0,f.jsx)(x,{title:"\u0421\u043e\u0437\u0434\u0430\u0442\u044c",onPress:X,disabled:!ie})})})]})})]})}function wt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ot(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?wt(Object(n),!0).forEach((function(t){(0,r.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):wt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const Pt=function(e){return(0,f.jsxs)(d(),Ot(Ot({xmlns:"http://www.w3.org/2000/svg",width:14,height:56,fill:"none"},e),{},{children:[(0,f.jsx)(u.Circle,{cx:7,cy:7,r:7,fill:"#373535"}),(0,f.jsx)(u.Circle,{cx:7,cy:49,r:7,fill:"#373535"}),(0,f.jsx)(u.Circle,{cx:7,cy:28,r:7,fill:"#373535"})]}))};function Ct(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function St(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ct(Object(n),!0).forEach((function(t){(0,r.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ct(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function kt(e){var t,n=e.navigation,r=e.route,l=be(),s=r.params.channelId,u=(0,i.useState)(!1),d=(0,a.default)(u,2),h=d[0],p=d[1],g=(0,i.useState)({nickname:""}),m=(0,a.default)(g,2),v=m[0],w=m[1],P=(0,y.default)(),C=P.width,S=P.height,D=Math.min(6e-4*C,.001*S),F=(0,i.useContext)(k).logout,M=(0,i.useContext)(k).user,B=(0,i.useContext)(O).selectedImage,E=(0,i.useState)(!1),z=(0,a.default)(E,2),T=z[0],L=z[1],A=(0,i.useState)(!1),V=(0,a.default)(A,2),W=V[0],U=V[1],H=(0,i.useState)(!1),Z=(0,a.default)(H,2),N=Z[0],J=Z[1],G=(0,i.useState)(""),$=(0,a.default)(G,2),q=$[0],X=$[1],K="admin",Q="root",ee=(0,i.useState)([]),te=(0,a.default)(ee,2),ne=te[0],re=te[1],oe=(0,i.useState)(""),ie=(0,a.default)(oe,2),le=ie[0],se=ie[1],ce=(0,i.useState)(!0),ue=(0,a.default)(ce,2),de=ue[0],fe=ue[1],he=(0,i.useState)(!0),pe=(0,a.default)(he,2),ge=pe[0],me=pe[1],ve=function(){var e=(0,o.default)((function*(){try{var e=yield fetch("https://linking-api.onrender.com/api/channels/"+s,{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Basic "+btoa(K+":"+Q)}});if(e.ok){var t,n=yield e.json(),r=(null==M?void 0:M.id)===(null==(t=n.creator)?void 0:t.id),a=n.members.find((function(e){return e.user.id===M.id})),o=n.members.find((function(e){return e.user.id===M.id}));if(o){var i=o.role;i&&void 0!==i.admin&&J(i.admin)}L(a),U(r),re(n),se(n.channel.name),me(!1)}}catch(l){alert("\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u0438 \u043a \u0441\u0435\u0440\u0432\u0435\u0440\u0443",l)}}));return function(){return e.apply(this,arguments)}}();(0,Y.useFocusEffect)(i.useCallback((function(){we(),fe(!0)}),[])),(0,i.useEffect)((function(){de&&ve().then((function(){return fe(!1)})).catch((function(e){return alert("\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u043f\u043e\u0434\u0433\u0440\u0443\u0437\u0438\u0442\u044c \u0434\u0430\u043d\u043d\u044b\u0435 \u043e \u043a\u0430\u043d\u0430\u043b\u0435",e)}))}),[de]),(0,i.useEffect)((function(){var e=setInterval((function(){fe(!0)}),1e3);return function(){return clearInterval(e)}}),[]);var we=function(){var e=(0,o.default)((function*(){try{var e=yield Pe();e&&e!==q&&X(e)}catch(t){console.log("\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u043f\u043e\u0434\u0433\u0440\u0443\u0437\u043a\u0435 \u043d\u0438\u043a\u043d\u0435\u0439\u043c\u0430",t)}}));return function(){return e.apply(this,arguments)}}(),Oe=v.nickname,Ce=[{onPress:function(e){return(0,ye.default)(e),n.navigate("Profile")},text:"\u041c\u043e\u0439 \u0430\u043a\u043a\u0430\u0443\u043d\u0442"},{onPress:function(){F(),window.location.reload()},text:"\u0412\u044b\u0439\u0442\u0438"}],Se=function(){var e=(0,o.default)((function*(){try{var e=q||M.name,t=T?"https://linking-api.onrender.com/api/channels/"+s+"/leave?username="+e:"https://linking-api.onrender.com/api/channels/join?username="+e+"&channel_name="+le;(yield fetch(t,{method:T?"DELETE":"POST",headers:{"Content-Type":"application/json",Authorization:"Basic "+btoa(K+":"+Q)}})).ok?(L((function(e){return!e})),alert(T?"\u0412\u044b \u043f\u043e\u043a\u0438\u043d\u0443\u043b\u0438 \u043a\u0430\u043d\u0430\u043b":"\u0412\u044b \u043f\u0440\u0438\u0441\u043e\u0435\u0434\u0438\u043d\u0438\u043b\u0438\u0441\u044c \u043a \u043a\u0430\u043d\u0430\u043b\u0443"),window.location.reload()):alert(T?"\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u043f\u043e\u043a\u0438\u043d\u0443\u0442\u044c \u043a\u0430\u043d\u0430\u043b":"\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u043f\u0440\u0438\u0441\u043e\u0435\u0434\u0438\u043d\u0438\u0442\u044c\u0441\u044f \u043a \u043a\u0430\u043d\u0430\u043b\u0443")}catch(n){alert("\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u0438 \u043a \u0441\u0435\u0440\u0432\u0435\u0440\u0443",n)}}));return function(){return e.apply(this,arguments)}}(),ke=B||M&&M.image,De=function(){var e=(0,o.default)((function*(){try{(yield fetch("https://linking-api.onrender.com/api/channels/create",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Basic "+btoa(K+":"+Q)},body:JSON.stringify({username:M.name,channelName:v.nickname})})).ok?(p(!1),alert("\u041a\u0430\u043d\u0430\u043b \u0441\u043e\u0437\u0434\u0430\u043d"),window.location.reload()):alert("\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u0441\u043e\u0437\u0434\u0430\u0442\u044c \u043a\u0430\u043d\u0430\u043b")}catch(e){alert("\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u0438 \u043a \u0441\u0435\u0440\u0432\u0435\u0440\u0443:",e)}}));return function(){return e.apply(this,arguments)}}();return(0,f.jsxs)(c.default,{style:l.containerMain,children:[(0,f.jsxs)(c.default,{style:l.profileContainer,children:[(0,f.jsx)(_,{imageUrl:ke,profile:!0}),(0,f.jsx)(j.default,{style:{color:"#000000",fontSize:Math.min(.03*C,.055*S),textAlign:"center",marginBottom:13,fontFamily:"Montserrat-Regular"},children:M.name}),Ce.map((function(e,t){return(0,f.jsx)(c.default,{style:{width:"70%"},children:(0,f.jsx)(xe,{data:e},t)},t)}))]}),(0,f.jsxs)(c.default,{style:l.historyContainer,children:[ge&&(0,f.jsx)(c.default,{style:l.barChanContainer,children:(0,f.jsx)(c.default,{style:{flex:1,alignItems:"center",justifyContent:"center"},children:(0,f.jsx)(R.default,{size:"large",color:"rgba(0, 118, 185, 0.35)"})})}),!ge&&(0,f.jsxs)(c.default,{style:l.barChanContainer,children:[(0,f.jsx)(j.default,{style:l.barText,children:le}),(0,f.jsx)(c.default,{children:(0,f.jsx)(x,{title:T?"\u041f\u043e\u043a\u0438\u043d\u0443\u0442\u044c":"\u041f\u0440\u0438\u0441\u043e\u0435\u0434\u0438\u043d\u0438\u0442\u044c\u0441\u044f",onPress:Se,disabled:W})}),N&&T&&(0,f.jsx)(c.default,{style:{marginRight:20},children:(0,f.jsx)(b.default,{onPress:function(e){return(0,ye.default)(e),n.navigate("Settings",{channelId:ne.channel.id})},children:(0,f.jsx)(Pt,{style:{transform:"scale("+D+")"}})})})]}),ge&&(0,f.jsx)(c.default,{style:{flex:1,alignItems:"center",justifyContent:"center"},children:(0,f.jsx)(R.default,{size:"large",color:"rgba(0, 118, 185, 0.35)"})}),!ge&&(0,f.jsx)(I.default,{style:{flex:1,scrollbarWidth:0,flexDirection:"column"},children:null==ne||null==(t=ne.messages)?void 0:t.map((function(e){var t,n,r,a,o,i=null==(t=e.sender)?void 0:t.id,l=ne.members.find((function(e){return e.user.id===i})),s=null==l||null==(n=l.role)?void 0:n.name;return(0,f.jsx)(pt,{data:{imageUrl:null==(r=e.sender)?void 0:r.image,nickname:null==(a=e.sender)?void 0:a.name,role:s,message:e.data,date:e.date,own:(null==(o=e.sender)?void 0:o.name)===M.name,channel:!0,unauth:!1,ident:e.id},currentUser:M},e.id)}))}),T&&(0,f.jsx)(c.default,{style:l.sendContainer,children:(0,f.jsx)(jt,{channel:!0,curuser:M.name,chanInf:ne,onMessageSent:function(){fe(!0)}})})]}),(0,f.jsx)(c.default,{style:l.bottomLeft,children:(0,f.jsx)(x,{title:"\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u043a\u0430\u043d\u0430\u043b",onPress:function(){return p(!0)}})}),(0,f.jsx)(je.default,{visible:h,transparent:!0,children:(0,f.jsxs)(c.default,{style:l.popupContainer,children:[(0,f.jsx)(j.default,{style:l.text,children:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u043a\u0430\u043d\u0430\u043b\u0430"}),(0,f.jsx)(c.default,{style:{marginBottom:13,alignItems:"center"},children:(0,f.jsx)(ae,{value:v.nickname,setValue:function(e){return w(St(St({},v),{},{nickname:e}))},placeholder:"",type:"nickname",flex:!0})}),(0,f.jsx)(b.default,{onPress:function(){return p(!1)},children:(0,f.jsx)(x,{title:"\u0421\u043e\u0437\u0434\u0430\u0442\u044c",onPress:De,disabled:!Oe})})]})})]})}function Dt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ft(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Dt(Object(n),!0).forEach((function(t){(0,r.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Dt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const Mt=function(e){return(0,f.jsx)(d(),Ft(Ft({xmlns:"http://www.w3.org/2000/svg",width:67,height:67,fill:"none"},e),{},{children:(0,f.jsx)(u.Circle,{cx:33.5,cy:33.5,r:23,stroke:"#000"})}))};function Bt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function It(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Bt(Object(n),!0).forEach((function(t){(0,r.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Bt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const Rt=function(e){return(0,f.jsxs)(d(),It(It({xmlns:"http://www.w3.org/2000/svg",width:67,height:67,fill:"none"},e),{},{children:[(0,f.jsx)(u.Circle,{cx:33.5,cy:33.5,r:23,fill:"#0076B9"}),(0,f.jsx)(u.Circle,{cx:33.5,cy:33.5,r:23,fill:"#000",fillOpacity:.2}),(0,f.jsx)(u.Circle,{cx:33.5,cy:33.5,r:23,stroke:"#000"})]}))};function Et(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function zt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Et(Object(n),!0).forEach((function(t){(0,r.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Et(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Tt(e){var t=e.data,n=t.role,r=t.name,l=(t.onPress,t.containerStyle),s=t.creator,u=t.channelId,d=t.admin,h=(0,i.useState)(!1),p=(0,a.default)(h,2),g=p[0],b=p[1],v=(0,i.useState)(!1),w=(0,a.default)(v,2),O=w[0],P=w[1],C=(0,i.useState)({nickname:"",role:n}),S=(0,a.default)(C,2),D=S[0],F=S[1],M=function(){var e=(0,y.default)(),t=e.width,n=e.height;return m.default.create({container:{backgroundColor:"#FFFFFF",borderRadius:26,paddingVertical:12,paddingHorizontal:16},text:{fontFamily:"Montserrat-Regular",color:"#000000",fontSize:Math.min(.012*t,.032*n),textAlign:"center",marginBottom:13},content:{flexDirection:"row",alignItems:"center",justifyContent:"space-between",flex:1},username:{fontFamily:"Montserrat-Regular",fontSize:Math.min(.012*t,.032*n),color:"#000000",marginLeft:40},role:{fontFamily:"Montserrat-Regular",fontSize:Math.min(.012*t,.032*n),color:"#0076B9",marginLeft:40,marginRight:40},inputContainer:{flexDirection:"row",alignItems:"center"},popupContainer:{backgroundColor:"#E7DEDE",borderRadius:35,padding:20,shadowColor:"#000",shadowOffset:{width:2,height:2},shadowOpacity:.25,shadowRadius:3.84,elevation:7,position:"absolute",top:"50%",left:"50%",transform:[{translateX:"-50%"},{translateY:"-50%"}],width:"30%",height:"30%",justifyContent:"center",alignItems:"center",flexDirection:"column"}})}(),I=(0,i.useState)(!1),R=(0,a.default)(I,2),E=R[0],z=R[1],T="admin",L="root",A=D.role,V=(0,i.useContext)(k).user,W=(0,y.default)(),U=W.width,H=W.height,Z=Math.min(6e-4*U,.001*H),_=function(){var e=(0,o.default)((function*(){if(V.name==r||d&&!s)alert("\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u043f\u043e\u043f\u044b\u0442\u043a\u0438 \u0443\u0434\u0430\u043b\u0435\u043d\u0438\u044f \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f:");else try{var e="https://linking-api.onrender.com/api/channels/"+u.channel.id+"/leave?username="+r;yield ze.default.delete(e,{auth:{username:T,password:L}})}catch(t){alert("\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u043f\u043e\u043f\u044b\u0442\u043a\u0438 \u0443\u0434\u0430\u043b\u0435\u043d\u0438\u044f \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f:",t)}}));return function(){return e.apply(this,arguments)}}(),N=function(){var e=(0,o.default)((function*(){var e={name:D.role,isAdmin:E,username:r,channelName:u.channel.name};try{(yield fetch("https://linking-api.onrender.com/api/roles/update",{method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Basic "+btoa(T+":"+L)},body:JSON.stringify(e)})).ok||alert("\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u0441\u043e\u0437\u0434\u0430\u0442\u044c \u0440\u043e\u043b\u044c")}catch(t){alert("\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u0438 \u0440\u043e\u043b\u0438",t)}P(!1)}));return function(){return e.apply(this,arguments)}}();return(0,f.jsxs)(B.default,{style:[M.container,l,g&&{backgroundColor:"#E7DEDE"}],onMouseEnter:function(){return b(!0)},onMouseLeave:function(){return b(!1)},children:[(0,f.jsxs)(c.default,{style:M.content,children:[!s&&(0,f.jsx)(B.default,{onPress:_,children:(0,f.jsx)(G,{})}),(0,f.jsx)(j.default,{style:M.username,children:r}),(0,f.jsx)(j.default,{style:M.role,children:D.role}),!s&&(0,f.jsx)(B.default,{onPress:function(){return P(!0)},children:(0,f.jsx)(Ye,{style:{transform:[{scale:Z}]}})})]}),(0,f.jsx)(je.default,{visible:O,transparent:!0,children:(0,f.jsxs)(c.default,{style:M.popupContainer,children:[(0,f.jsx)(j.default,{style:M.text,children:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u0440\u043e\u043b\u0438"}),(0,f.jsxs)(c.default,{style:M.inputContainer,children:[(0,f.jsx)(ae,{value:D.role,setValue:function(e){return F(zt(zt({},D),{},{role:e}))},placeholder:"",type:"nickname",flex:!0}),(0,f.jsx)(B.default,{style:M.adminButton,onPress:function(){z(!E)},children:E?(0,f.jsx)(Rt,{}):(0,f.jsx)(Mt,{})})]}),(0,f.jsx)(c.default,{children:(0,f.jsx)(B.default,{onPress:function(){return P(!1)},children:(0,f.jsx)(x,{title:"\u041d\u0430\u0437\u043d\u0430\u0447\u0438\u0442\u044c",onPress:N,disabled:!A})})})]})})]})}function Lt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function At(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Lt(Object(n),!0).forEach((function(t){(0,r.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Lt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Vt(e){var t,n=e.navigation,r=e.route.params.channelId,l=(0,i.useContext)(k).user,s=be(),u=(0,i.useState)(!1),d=(0,a.default)(u,2),h=d[0],p=d[1],g=(0,i.useState)(""),m=(0,a.default)(g,2),j=(m[0],m[1]),v=(0,i.useState)(0),O=(0,a.default)(v,2),P=(O[0],O[1]),C=(0,i.useState)(!1),S=(0,a.default)(C,2),D=S[0],F=S[1],M=(0,i.useState)([]),B=(0,a.default)(M,2),E=B[0],z=B[1],T="admin",L="root",A=(0,y.default)(),V=A.width,W=A.height,U=Math.min(9e-4*V,.001*W),H=(0,i.useState)(!0),Z=(0,a.default)(H,2),_=Z[0],N=Z[1];Math.min(6e-4*V,.001*W);(0,Y.useFocusEffect)(i.useCallback((function(){X()}),[]));var J=(0,i.useState)({nickname:E.name||"\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430"}),G=(0,a.default)(J,2),$=G[0],q=G[1],X=function(){var e=(0,o.default)((function*(){try{var e=yield fetch("https://linking-api.onrender.com/api/channels/"+r,{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Basic "+btoa(T+":"+L)}});if(e.ok){var t,n=yield e.json();z(n),q((function(e){return At(At({},e),{},{nickname:n.channel.name||"a"})}));var a=(null==l?void 0:l.id)===(null==(t=n.creator)?void 0:t.id);p(a),N(!1)}else alert("\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c \u0434\u0430\u043d\u043d\u044b\u0435 \u043e \u043a\u0430\u043d\u0430\u043b\u0435, \u0432\u043e\u0437\u043c\u043e\u0436\u043d\u043e \u043e\u043d \u0431\u043e\u043b\u044c\u0448\u0435 \u043d\u0435 \u0441\u0443\u0449\u0435\u0441\u0442\u0432\u0443\u0435\u0442")}catch(o){alert("\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u0438 \u043a \u0441\u0435\u0440\u0432\u0435\u0440\u0443",o)}}));return function(){return e.apply(this,arguments)}}(),K=function(){var e=(0,o.default)((function*(){try{(yield fetch("https://linking-api.onrender.com/api/channels/delete/"+r,{method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Basic "+btoa(T+":"+L)}})).ok?(alert("\u041a\u0430\u043d\u0430\u043b \u0443\u0434\u0430\u043b\u0435\u043d"),n.navigate("MainAuth")):alert("\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u0443\u0434\u0430\u043b\u0438\u0442\u044c \u043a\u0430\u043d\u0430\u043b")}catch(e){alert("\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u0438 \u043a \u0441\u0435\u0440\u0432\u0435\u0440\u0443",e)}}));return function(){return e.apply(this,arguments)}}(),Q=function(){var e=(0,o.default)((function*(e){j(e);try{yield w.default.setItem("role",e)}catch(t){console.log("\u041e\u0448\u0438\u0431\u043a\u0430 \u0441\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u0438\u044f \u0440\u043e\u043b\u0438:",t)}}));return function(t){return e.apply(this,arguments)}}(),ee=function(){var e=(0,o.default)((function*(){if(D){F(!1),P(0);try{var e=yield fetch("https://linking-api.onrender.com/api/channels/"+r+"/update?name="+encodeURIComponent($.nickname),{method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Basic "+btoa(T+":"+L)}});if(e.ok){var t=yield e.json(),n=l.channels.map((function(e){return e.id===t.id?At(At({},e),{},{name:t.name}):e})),a=At(At({},l),{},{channels:n});localStorage.setItem("user",JSON.stringify(a))}else alert("\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u043e\u0431\u043d\u043e\u0432\u0438\u0442\u044c \u0438\u043c\u044f \u043a\u0430\u043d\u0430\u043b\u0430")}catch(o){alert("\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u0438 \u043a \u0441\u0435\u0440\u0432\u0435\u0440\u0443",o)}}else F(!0),P(90)}));return function(){return e.apply(this,arguments)}}();return(0,f.jsxs)(c.default,{style:s.containerSettings,children:[(0,f.jsxs)(c.default,{style:s.channNameContainer,children:[(0,f.jsx)(c.default,{style:s.dataInputContainer,children:(0,f.jsx)(ae,{value:$.nickname,setValue:function(e){return q(At(At({},$),{},{nickname:e}))},placeholder:"",type:"nickname",flex:!1,editable:D})}),(0,f.jsx)(b.default,{onPress:ee,children:(0,f.jsx)(Ye,{style:{transform:"rotate("+(D?360:0)+"deg) scale("+U+")",transition:"transform 0.5s ease"}})})]}),(0,f.jsxs)(c.default,{style:s.settingsContainer,children:[_&&(0,f.jsx)(c.default,{style:{flex:1,alignItems:"center",justifyContent:"center"},children:(0,f.jsx)(R.default,{size:"large",color:"rgba(0, 118, 185, 0.35)"})}),!_&&(0,f.jsx)(I.default,{style:{flex:1,scrollbarWidth:0,flexDirection:"column"},children:null==(t=E.members)?void 0:t.map((function(e){return(0,f.jsx)(Tt,{data:{key:e.id,name:e.user.name,role:e.role.name,onRoleChange:Q,creator:e.role.creator,admin:e.role.admin,channelId:E}})}))})]}),(0,f.jsx)(c.default,{style:[s.topLeft,{transform:[{scale:U}]}],children:(0,f.jsx)(b.default,{onPress:function(){return n.navigate("Channel",{channelId:r})},children:(0,f.jsx)(He,{})})}),(0,f.jsx)(c.default,{style:s.bottomLeft,children:(0,f.jsx)(x,{title:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u043a\u0430\u043d\u0430\u043b",onPress:K,disabled:!h})})]})}function Wt(e){var t,n=e.navigation,r=e.route,l=be(),s=r.params.channelId,u=(0,i.useState)(!1),d=(0,a.default)(u,2),h=(d[0],d[1]);(0,i.useEffect)((function(){h(!1)}),[s]),(0,Y.useFocusEffect)(i.useCallback((function(){F()}),[s]));var p=(0,i.useState)([]),g=(0,a.default)(p,2),m=g[0],y=g[1],b=(0,i.useRef)(null),v=(0,i.useState)(!0),w=(0,a.default)(v,2),O=w[0],P=w[1];(0,i.useEffect)((function(){var e;(null==m||null==(e=m.messages)?void 0:e.length)>0&&O&&b.current.scrollToEnd({animated:!0})}),[null==m?void 0:m.messages,O]);var C=(0,i.useState)(""),S=(0,a.default)(C,2),k=S[0],D=S[1],F=function(){var e=(0,o.default)((function*(){try{var e=yield fetch("https://linking-api.onrender.com/api/channels/"+s,{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Basic "+btoa("admin:root")}});if(e.ok){var t=yield e.json();y(t),D(t.channel.name)}else alert("\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c \u0434\u0430\u043d\u043d\u044b\u0435 \u043e \u043a\u0430\u043d\u0430\u043b\u0435, \u0432\u043e\u0437\u043c\u043e\u0436\u043d\u043e \u043e\u043d \u0431\u043e\u043b\u044c\u0448\u0435 \u043d\u0435 \u0441\u0443\u0449\u0435\u0441\u0442\u0432\u0443\u0435\u0442")}catch(n){alert("\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u0438 \u043a \u0441\u0435\u0440\u0432\u0435\u0440\u0443:",n)}}));return function(){return e.apply(this,arguments)}}();return m?(0,f.jsxs)(c.default,{style:l.containerMain,children:[(0,f.jsxs)(c.default,{style:l.barChanContainer,children:[(0,f.jsx)(j.default,{style:l.barText,children:k}),(0,f.jsx)(c.default,{children:(0,f.jsx)(x,{title:"\u041f\u0440\u0438\u0441\u043e\u0435\u0434\u0438\u043d\u0438\u0442\u044c\u0441\u044f",onPress:function(){return n.navigate("Auth")}})})]}),(0,f.jsx)(c.default,{style:l.historyContainer,children:(0,f.jsx)(I.default,{ref:b,onContentSizeChange:function(){var e=b.current&&b.current.contentOffset&&b.current.contentOffset.y+b.current.layoutMeasurement.height>=b.current.contentSize.height;P(e)},style:{flex:1,scrollbarWidth:0,flexDirection:"column"},children:null==m||null==(t=m.messages)?void 0:t.map((function(e){var t,n,r,a,o=null==(t=e.sender)?void 0:t.id,i=m.members.find((function(e){return e.user.id===o})),l=null==i||null==(n=i.role)?void 0:n.name;return(0,f.jsx)(pt,{data:{imageUrl:null==(r=e.sender)?void 0:r.image,nickname:null==(a=e.sender)?void 0:a.name,role:l,message:e.data,date:e.date,own:!1,channel:!0,unauth:!0}},e.id)}))})}),(0,f.jsx)(c.default,{style:l.bottomLeft,children:(0,f.jsx)(x,{title:"\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u043a\u0430\u043d\u0430\u043b",onPress:function(){return n.navigate("Auth")}})})]}):null}var Ut=n(316);function Ht(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Zt(){var e=(0,s.default)(),t=(0,i.useState)(""),n=(0,a.default)(t,2),u=n[0],d=n[1],h=(0,i.useState)([]),p=(0,a.default)(h,2),g=(p[0],p[1],"admin"),m="root",y=(0,i.useState)([]),j=(0,a.default)(y,2),v=j[0],w=j[1],O=(0,i.useState)([]),C=(0,a.default)(O,2),k=C[0],F=C[1];(0,i.useEffect)((function(){document.title="Linking"}),[]),(0,i.useEffect)((function(){var e=function(){var e=(0,o.default)((function*(){try{var e=yield fetch("https://linking-api.onrender.com/api/channels",{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Basic "+btoa(g+":"+m)}});if(e.ok){for(var t=yield e.json(),n=[],r=[],a=function*(){var e=t[o];n.push({name:e.name,onPress:function(t){return t.navigation.navigate("Channel",{channelId:e.channel.id})},avatarUrl:null}),r.push({name:e.name,onPress:function(t){return t.navigation.navigate("ChannelUnauth",{channelId:e.channel.id})},avatarUrl:null})},o=0;o<t.length;o++)yield*a();var i=yield fetch("https://linking-api.onrender.com/api/users",{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Basic "+btoa(g+":"+m)}});if(i.ok)for(var l=yield i.json(),s=function*(){var e=l[c];n.push({name:e.name,onPress:function(t){return t.navigation.navigate("Chat",{chatUser:e})},avatarUrl:e.image})},c=0;c<l.length;c++)yield*s();else console.log("Failed to fetch user data");F(n),w(r)}else console.log("Failed to fetch channel data")}catch(u){console.log("Error fetching data:",u)}}));return function(){return e.apply(this,arguments)}}();e()}),[]);var M=[{name:"Greetings",component:D,options:function(e){var t=e.navigation;return{title:"",headerLeft:function(){return(0,f.jsx)(b.default,{onPress:function(){return t.navigate("MainUnauth")},children:(0,f.jsx)(me,{style:{marginLeft:20}})})},headerRight:function(){return(0,f.jsx)(x,{style:{marginRight:20},title:"\u0412\u043e\u0439\u0442\u0438",onPress:function(){return t.navigate("Auth")}})},headerShadowVisible:!0,headerStyle:{height:100,borderBottomWidth:1,borderBottomColor:"#ccc",backgroundColor:"#fff",elevation:3,justifyContent:"space-between",flexDirection:"row",alignItems:"center",paddingHorizontal:20}}}},{name:"MainUnauth",component:ee,options:function(e){var t=e.navigation;return{title:"",headerLeft:function(){return(0,f.jsx)(b.default,{onPress:function(){return t.navigate("MainUnauth")},children:(0,f.jsx)(me,{style:{marginLeft:20}})})},headerRight:function(){return(0,f.jsxs)(c.default,{style:{flexDirection:"row",alignItems:"center"},children:[(0,f.jsx)(Q,{style:{marginRight:10},value:u,setValue:d,results:v,navigation:t,unauth:!0}),(0,f.jsx)(c.default,{style:{paddingHorizontal:193}}),(0,f.jsx)(x,{style:{marginLeft:10},title:"\u0412\u043e\u0439\u0442\u0438",onPress:function(){return t.navigate("Auth")}})]})},headerShadowVisible:!0,headerStyle:{height:100,borderBottomWidth:1,borderBottomColor:"#ccc",backgroundColor:"#fff",elevation:3,justifyContent:"space-between",flexDirection:"row",alignItems:"center",paddingHorizontal:20}}}},{name:"ChannelUnauth",component:Wt,options:function(e){var t=e.navigation;e.route;return{title:"",headerLeft:function(){return(0,f.jsx)(b.default,{onPress:function(){return t.navigate("MainUnauth")},children:(0,f.jsx)(me,{style:{marginLeft:20}})})},headerRight:function(){return(0,f.jsxs)(c.default,{style:{flexDirection:"row",alignItems:"center"},children:[(0,f.jsx)(Q,{style:{marginRight:10},value:u,setValue:d,results:v,unauth:!0,navigation:t}),(0,f.jsx)(c.default,{style:{paddingHorizontal:193}}),(0,f.jsx)(x,{style:{marginLeft:10},title:"\u0412\u043e\u0439\u0442\u0438",onPress:function(){return t.navigate("Auth")}})]})},headerShadowVisible:!0,headerStyle:{height:100,borderBottomWidth:1,borderBottomColor:"#ccc",backgroundColor:"#fff",elevation:3,justifyContent:"space-between",flexDirection:"row",alignItems:"center",paddingHorizontal:20}}}},{name:"Settings",component:Vt,options:function(e){var t=e.navigation;e.route;return{title:"",headerLeft:function(){return(0,f.jsx)(b.default,{onPress:function(){return t.navigate("MainAuth")},children:(0,f.jsx)(me,{style:{marginLeft:20}})})},headerRight:function(){return(0,f.jsxs)(c.default,{style:{flexDirection:"row",alignItems:"center"},children:[(0,f.jsx)(Q,{style:{marginRight:10},value:u,setValue:d,results:k,navigation:t}),(0,f.jsx)(c.default,{style:{paddingHorizontal:30}})]})},headerShadowVisible:!0,headerStyle:{height:100,borderBottomWidth:1,borderBottomColor:"#ccc",backgroundColor:"#fff",elevation:3,justifyContent:"space-between",flexDirection:"row",alignItems:"center",paddingHorizontal:20}}}},{name:"MainAuth",component:Me,options:function(e){var t=e.navigation;return{title:"",headerLeft:function(){return(0,f.jsx)(b.default,{onPress:function(){return t.navigate("MainAuth")},children:(0,f.jsx)(me,{style:{marginLeft:20}})})},headerRight:function(){return(0,f.jsxs)(c.default,{style:{flexDirection:"row",alignItems:"center"},children:[(0,f.jsx)(Q,{style:{marginRight:10},value:u,setValue:d,results:k,navigation:t}),(0,f.jsx)(c.default,{style:{paddingHorizontal:30}})]})},headerShadowVisible:!0,headerStyle:{height:100,borderBottomWidth:1,borderBottomColor:"#ccc",backgroundColor:"#fff",elevation:3,justifyContent:"space-between",flexDirection:"row",alignItems:"center",paddingHorizontal:20}}}},{name:"Chat",component:vt,options:function(e){var t=e.navigation;e.route;return{title:"",headerLeft:function(){return(0,f.jsx)(b.default,{onPress:function(){return t.navigate("MainAuth")},children:(0,f.jsx)(me,{style:{marginLeft:20}})})},headerRight:function(){return(0,f.jsxs)(c.default,{style:{flexDirection:"row",alignItems:"center"},children:[(0,f.jsx)(Q,{style:{marginRight:10},value:u,setValue:d,results:k,navigation:t}),(0,f.jsx)(c.default,{style:{paddingHorizontal:30}})]})},headerShadowVisible:!0,headerStyle:{height:100,borderBottomWidth:1,borderBottomColor:"#ccc",backgroundColor:"#fff",elevation:3,justifyContent:"space-between",flexDirection:"row",alignItems:"center",paddingHorizontal:20}}}},{name:"Channel",component:kt,options:function(e){var t=e.navigation;e.route;return{title:"",headerLeft:function(){return(0,f.jsx)(b.default,{onPress:function(){return t.navigate("MainAuth")},children:(0,f.jsx)(me,{style:{marginLeft:20}})})},headerRight:function(){return(0,f.jsxs)(c.default,{style:{flexDirection:"row",alignItems:"center"},children:[(0,f.jsx)(Q,{style:{marginRight:10},value:u,setValue:d,results:k,navigation:t}),(0,f.jsx)(c.default,{style:{paddingHorizontal:30}})]})},headerShadowVisible:!0,headerStyle:{height:100,borderBottomWidth:1,borderBottomColor:"#ccc",backgroundColor:"#fff",elevation:3,justifyContent:"space-between",flexDirection:"row",alignItems:"center",paddingHorizontal:20}}}},{name:"Profile",component:Ke,options:function(e){var t=e.navigation;return{title:"",headerLeft:function(){return(0,f.jsx)(b.default,{onPress:function(){return t.navigate("MainAuth")},children:(0,f.jsx)(me,{style:{marginLeft:20}})})},headerRight:function(){return(0,f.jsxs)(c.default,{style:{flexDirection:"row",alignItems:"center"},children:[(0,f.jsx)(Q,{style:{marginRight:10},value:u,setValue:d,results:k,navigation:t}),(0,f.jsx)(c.default,{style:{paddingHorizontal:30}})]})},headerShadowVisible:!0,headerStyle:{height:100,borderBottomWidth:1,borderBottomColor:"#ccc",backgroundColor:"#fff",elevation:3,justifyContent:"space-between",flexDirection:"row",alignItems:"center",paddingHorizontal:20}}}},{name:"ChangePassword",component:at,options:function(e){var t=e.navigation;return{title:"",headerLeft:function(){return(0,f.jsx)(b.default,{onPress:function(){return t.navigate("MainAuth")},children:(0,f.jsx)(me,{style:{marginLeft:20}})})},headerRight:function(){return(0,f.jsxs)(c.default,{style:{flexDirection:"row",alignItems:"center"},children:[(0,f.jsx)(Q,{style:{marginRight:10},value:u,setValue:d,results:k,navigation:t}),(0,f.jsx)(c.default,{style:{paddingHorizontal:30}})]})},headerShadowVisible:!0,headerStyle:{height:100,borderBottomWidth:1,borderBottomColor:"#ccc",backgroundColor:"#fff",elevation:3,justifyContent:"space-between",flexDirection:"row",alignItems:"center",paddingHorizontal:20}}}},{name:"ChangeEmail",component:tt,options:function(e){var t=e.navigation;return{title:"",headerLeft:function(){return(0,f.jsx)(b.default,{onPress:function(){return t.navigate("MainAuth")},children:(0,f.jsx)(me,{style:{marginLeft:20}})})},headerRight:function(){return(0,f.jsxs)(c.default,{style:{flexDirection:"row",alignItems:"center"},children:[(0,f.jsx)(Q,{style:{marginRight:10},value:u,setValue:d,results:k,navigation:t}),(0,f.jsx)(c.default,{style:{paddingHorizontal:30}})]})},headerShadowVisible:!0,headerStyle:{height:100,borderBottomWidth:1,borderBottomColor:"#ccc",backgroundColor:"#fff",elevation:3,justifyContent:"space-between",flexDirection:"row",alignItems:"center",paddingHorizontal:20}}}},{name:"Auth",component:le,options:function(e){var t=e.navigation;return{title:"",headerLeft:function(){return(0,f.jsx)(b.default,{onPress:function(){return t.navigate("MainUnauth")},children:(0,f.jsx)(me,{style:{marginLeft:20}})})},headerRight:function(){return(0,f.jsxs)(c.default,{style:{flexDirection:"row",alignItems:"center"},children:[(0,f.jsx)(Q,{style:{marginRight:10},value:u,setValue:d,results:k,navigation:t,unauth:!0}),(0,f.jsx)(c.default,{style:{paddingHorizontal:193}}),(0,f.jsx)(x,{style:{marginLeft:10},title:"\u0412\u043e\u0439\u0442\u0438",onPress:function(){return t.navigate("Auth")}})]})},headerShadowVisible:!0,headerStyle:{height:100,borderBottomWidth:1,borderBottomColor:"#ccc",backgroundColor:"#fff",elevation:3,justifyContent:"space-between",flexDirection:"row",alignItems:"center",paddingHorizontal:20}}}},{name:"Reg",component:ue,options:function(e){var t=e.navigation;return{title:"",headerLeft:function(){return(0,f.jsx)(b.default,{onPress:function(){return t.navigate("MainUnauth")},children:(0,f.jsx)(me,{style:{marginLeft:20}})})},headerRight:function(){return(0,f.jsxs)(c.default,{style:{flexDirection:"row",alignItems:"center"},children:[(0,f.jsx)(Q,{style:{marginRight:10},value:u,setValue:d,results:k,navigation:t,unauth:!0}),(0,f.jsx)(c.default,{style:{paddingHorizontal:193}}),(0,f.jsx)(x,{style:{marginLeft:10},title:"\u0412\u043e\u0439\u0442\u0438",onPress:function(){return t.navigate("Auth")}})]})},headerShadowVisible:!0,headerStyle:{height:100,borderBottomWidth:1,borderBottomColor:"#ccc",backgroundColor:"#fff",elevation:3,justifyContent:"space-between",flexDirection:"row",alignItems:"center",paddingHorizontal:20}}}},{name:"Forgot",component:he,options:function(e){var t=e.navigation;return{title:"",headerLeft:function(){return(0,f.jsx)(b.default,{onPress:function(){return t.navigate("MainUnauth")},children:(0,f.jsx)(me,{style:{marginLeft:20}})})},headerRight:function(){return(0,f.jsxs)(c.default,{style:{flexDirection:"row",alignItems:"center"},children:[(0,f.jsx)(Q,{style:{marginRight:10},value:u,setValue:d,results:k,navigation:t,unauth:!0}),(0,f.jsx)(c.default,{style:{paddingHorizontal:193}}),(0,f.jsx)(x,{style:{marginLeft:10},title:"\u0412\u043e\u0439\u0442\u0438",onPress:function(){return t.navigate("Auth")}})]})},headerShadowVisible:!0,headerStyle:{height:100,borderBottomWidth:1,borderBottomColor:"#ccc",backgroundColor:"#fff",elevation:3,justifyContent:"space-between",flexDirection:"row",alignItems:"center",paddingHorizontal:20}}}}];return(0,f.jsx)(P,{children:(0,f.jsx)(S,{children:(0,f.jsx)(ht,{children:(0,f.jsx)(l.default,{children:(0,f.jsx)(e.Navigator,{children:M.map((function(t){return(0,f.jsx)(e.Screen,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ht(Object(n),!0).forEach((function(t){(0,r.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ht(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},t),t.name)}))})})})})})}(function(){var e=(0,o.default)((function*(){yield Ut.loadAsync({"Montserrat-Regular":n(3564),"Montserrat-Italic":n(435),"Montserrat-Bold":n(5159)})}));return function(){return e.apply(this,arguments)}})()().then((function(){renderApp()})).catch((function(e){console.error("Error loading fonts:",e)}))},5159:(e,t,n)=>{e.exports=n.p+"static/media/Montserrat-Bold.0915f0a8c3367a6d05ec.ttf"},435:(e,t,n)=>{e.exports=n.p+"static/media/Montserrat-Italic.ce3a49f8e6c790a13ba0.ttf"},3564:(e,t,n)=>{e.exports=n.p+"static/media/Montserrat-Regular.2a2d37bf7680d86811db.ttf"}},t={};function n(r){var a=t[r];if(void 0!==a)return a.exports;var o=t[r]={exports:{}};return e[r].call(o.exports,o,o.exports,n),o.exports}n.m=e,(()=>{var e=[];n.O=(t,r,a,o)=>{if(!r){var i=1/0;for(u=0;u<e.length;u++){for(var[r,a,o]=e[u],l=!0,s=0;s<r.length;s++)(!1&o||i>=o)&&Object.keys(n.O).every((e=>n.O[e](r[s])))?r.splice(s--,1):(l=!1,o<i&&(i=o));if(l){e.splice(u--,1);var c=a();void 0!==c&&(t=c)}}return t}o=o||0;for(var u=e.length;u>0&&e[u-1][2]>o;u--)e[u]=e[u-1];e[u]=[r,a,o]}})(),n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},(()=>{var e,t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__;n.t=function(r,a){if(1&a&&(r=this(r)),8&a)return r;if("object"===typeof r&&r){if(4&a&&r.__esModule)return r;if(16&a&&"function"===typeof r.then)return r}var o=Object.create(null);n.r(o);var i={};e=e||[null,t({}),t([]),t(t)];for(var l=2&a&&r;"object"==typeof l&&!~e.indexOf(l);l=t(l))Object.getOwnPropertyNames(l).forEach((e=>i[e]=()=>r[e]));return i.default=()=>r,n.d(o,i),o}})(),n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.p="/",(()=>{var e={179:0};n.O.j=t=>0===e[t];var t=(t,r)=>{var a,o,[i,l,s]=r,c=0;if(i.some((t=>0!==e[t]))){for(a in l)n.o(l,a)&&(n.m[a]=l[a]);if(s)var u=s(n)}for(t&&t(r);c<i.length;c++)o=i[c],n.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return n.O(u)},r=self.webpackChunkweb=self.webpackChunkweb||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))})();var r=n.O(void 0,[124],(()=>n(8029)));r=n.O(r)})();
//# sourceMappingURL=main.6604ad02.js.map