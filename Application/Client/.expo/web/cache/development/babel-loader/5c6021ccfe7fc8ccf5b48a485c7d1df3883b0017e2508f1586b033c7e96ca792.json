{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport React, { useContext, useState } from 'react';\nimport View from \"react-native-web/dist/exports/View\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport useWindowDimensions from \"react-native-web/dist/exports/useWindowDimensions\";\nimport TouchableHighlight from \"react-native-web/dist/exports/TouchableHighlight\";\nimport ShowAvatar from \"../Avatar/ShowAvatar/showAvatar\";\nimport useStyles from \"./forwardMessage.module\";\nimport AuthContext from \"../../context/AuthContext\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nvar ForwardMessage = function ForwardMessage(_ref) {\n  var data = _ref.data;\n  var imageUrl = data.imageUrl,\n    nickname = data.nickname,\n    message = data.message,\n    own = data.own,\n    from = data.from,\n    id = data.id,\n    navChat = data.navChat;\n  var styles = useStyles();\n  var _useState = useState(false),\n    _useState2 = _slicedToArray(_useState, 2),\n    showDeleteButton = _useState2[0],\n    setShowDeleteButton = _useState2[1];\n  var _useContext = useContext(AuthContext),\n    user = _useContext.user;\n  var username = 'admin';\n  var password = 'root';\n  var _useWindowDimensions = useWindowDimensions(),\n    width = _useWindowDimensions.width,\n    height = _useWindowDimensions.height;\n  var handleDeletePress = function handleDeletePress() {\n    var user_id = user.id;\n    var message_id = id;\n    setShowDeleteButton(false);\n    fetch(\"https://linking-api.onrender.com/api/saved_message/delete?user_id=\" + user_id + \"&message_id=\" + message_id, {\n      method: 'DELETE',\n      headers: {\n        'Content-Type': 'application/json',\n        'Authorization': \"Basic \" + btoa(username + \":\" + password)\n      }\n    }).then(function (response) {\n      if (response.ok) {\n        window.location.reload();\n      } else {\n        alert('Не удалось удалить сообщение');\n      }\n    }).catch(function (error) {\n      alert('Ошибка при удалении сообщения', error);\n    });\n  };\n  var handleMessageBoxPress = function handleMessageBoxPress() {\n    setShowDeleteButton(!showDeleteButton);\n  };\n  return _jsxs(View, {\n    style: styles.container,\n    children: [own ? null : _jsx(ShowAvatar, {\n      imageUrl: imageUrl,\n      profile: false,\n      style: styles.avatar\n    }), _jsxs(TouchableOpacity, {\n      style: [styles.messageBox, own && styles.ownMessageBox],\n      onPress: handleMessageBoxPress,\n      children: [showDeleteButton && _jsx(TouchableOpacity, {\n        onPress: handleDeletePress,\n        children: _jsx(Text, {\n          style: {\n            fontFamily: 'Montserrat-Italic'\n          },\n          children: \"\\u0423\\u0434\\u0430\\u043B\\u0438\\u0442\\u044C\"\n        })\n      }), _jsx(Text, {\n        style: [styles.nickname, own && styles.ownNickname],\n        children: nickname\n      }), _jsx(Text, {\n        style: [styles.message, own && styles.ownMessage],\n        children: message\n      }), _jsx(TouchableHighlight, {\n        children: _jsxs(Text, {\n          style: {\n            fontFamily: 'Montserrat-Italic',\n            fontSize: Math.min(width * 0.008, height * 0.025)\n          },\n          children: [\"Forwarded from: \", from]\n        })\n      }), !own && _jsx(View, {\n        style: styles.bubbleTail\n      })]\n    })]\n  });\n};\nexport default ForwardMessage;","map":{"version":3,"names":["React","useContext","useState","View","Text","TouchableOpacity","useWindowDimensions","TouchableHighlight","ShowAvatar","useStyles","AuthContext","jsx","_jsx","jsxs","_jsxs","ForwardMessage","_ref","data","imageUrl","nickname","message","own","from","id","navChat","styles","_useState","_useState2","_slicedToArray","showDeleteButton","setShowDeleteButton","_useContext","user","username","password","_useWindowDimensions","width","height","handleDeletePress","user_id","message_id","fetch","method","headers","btoa","then","response","ok","window","location","reload","alert","catch","error","handleMessageBoxPress","style","container","children","profile","avatar","messageBox","ownMessageBox","onPress","fontFamily","ownNickname","ownMessage","fontSize","Math","min","bubbleTail"],"sources":["C:/Users/ilias/OneDrive/Рабочий стол/messenger_project/Application/Client/components/forwardMessage/forwardMessage.js"],"sourcesContent":["import React, { useContext, useState } from 'react';\r\nimport { View, Text, TouchableOpacity, useWindowDimensions, TouchableHighlight } from 'react-native-web';\r\nimport ShowAvatar from '../Avatar/ShowAvatar/showAvatar';\r\nimport useStyles from './forwardMessage.module';\r\nimport AuthContext from '../../context/AuthContext';\r\n\r\nconst ForwardMessage = ({ data }) => {\r\n  const { imageUrl, nickname, message, own, from, id, navChat } = data;\r\n  const styles = useStyles();\r\n  const [showDeleteButton, setShowDeleteButton] = useState(false);\r\n  const {user} = useContext(AuthContext);\r\n  const username = 'admin';\r\n  const password = 'root';\r\n  const { width, height } = useWindowDimensions();\r\n  \r\n  const handleDeletePress = () => {\r\n    const user_id = user.id; \r\n    const message_id = id; \r\n     setShowDeleteButton(false);\r\n    fetch(`https://linking-api.onrender.com/api/saved_message/delete?user_id=${user_id}&message_id=${message_id}`, {\r\n      method: 'DELETE',\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n        'Authorization': `Basic ${btoa(`${username}:${password}`)}`\r\n      },\r\n    })\r\n      .then((response) => {\r\n        if (response.ok) {\r\n          window.location.reload();\r\n        } else {\r\n          alert('Не удалось удалить сообщение');\r\n        }\r\n      })\r\n      .catch((error) => {\r\n        alert('Ошибка при удалении сообщения', error);\r\n      });\r\n  };\r\n\r\n  const handleMessageBoxPress = () => {\r\n    setShowDeleteButton(!showDeleteButton);\r\n  };\r\n\r\n  return (\r\n    <View style={styles.container}>\r\n      {own ? null : (\r\n        <ShowAvatar imageUrl={imageUrl} profile={false} style={styles.avatar} />\r\n      )}\r\n      <TouchableOpacity\r\n        style={[\r\n          styles.messageBox,\r\n          own && styles.ownMessageBox,\r\n        ]}\r\n        onPress={handleMessageBoxPress}\r\n      >\r\n        {showDeleteButton && (\r\n          <TouchableOpacity onPress={handleDeletePress}>\r\n            <Text style={{ fontFamily: 'Montserrat-Italic' }}>Удалить</Text>\r\n          </TouchableOpacity>\r\n        )}\r\n        <Text style={[styles.nickname, own && styles.ownNickname]}>\r\n          {nickname}\r\n        </Text>\r\n        <Text style={[styles.message, own && styles.ownMessage]}>{message}</Text>\r\n        <TouchableHighlight>\r\n        <Text style={{ fontFamily: 'Montserrat-Italic', fontSize: Math.min(width * 0.008, height * 0.025), }}>\r\n          Forwarded from: {from}\r\n        </Text>\r\n        </TouchableHighlight>\r\n        {!own && <View style={styles.bubbleTail} />}\r\n      </TouchableOpacity>\r\n    </View>\r\n  );\r\n};\r\n\r\nexport default ForwardMessage;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}