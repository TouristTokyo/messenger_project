{"ast":null,"code":"import _slicedToArray from\"@babel/runtime/helpers/slicedToArray\";import React,{useContext,useState}from'react';import View from\"react-native-web/dist/exports/View\";import Text from\"react-native-web/dist/exports/Text\";import TouchableOpacity from\"react-native-web/dist/exports/TouchableOpacity\";import useWindowDimensions from\"react-native-web/dist/exports/useWindowDimensions\";import TouchableHighlight from\"react-native-web/dist/exports/TouchableHighlight\";import ShowAvatar from\"../Avatar/ShowAvatar/showAvatar\";import useStyles from\"./forwardMessage.module\";import AuthContext from\"../../context/AuthContext\";import{useNavigation,useIsFocused}from'@react-navigation/native';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var ForwardMessage=function ForwardMessage(_ref){var data=_ref.data;var imageUrl=data.imageUrl,nickname=data.nickname,message=data.message,own=data.own,from=data.from,id=data.id,nav=data.nav,answer=data.answer;var styles=useStyles();var _useState=useState(false),_useState2=_slicedToArray(_useState,2),showDeleteButton=_useState2[0],setShowDeleteButton=_useState2[1];var _useContext=useContext(AuthContext),user=_useContext.user;var username='admin';var password='root';var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),isHovered=_useState4[0],setIsHovered=_useState4[1];var _useWindowDimensions=useWindowDimensions(),width=_useWindowDimensions.width,height=_useWindowDimensions.height;var navigationt=useNavigation();var handleDeletePress=function handleDeletePress(){var user_id=user.id;var message_id=id;setShowDeleteButton(false);fetch(\"https://linking-api.onrender.com/api/saved_message/delete?user_id=\"+user_id+\"&message_id=\"+message_id,{method:'DELETE',headers:{'Content-Type':'application/json','Authorization':\"Basic \"+btoa(username+\":\"+password)}}).then(function(response){if(response.ok){window.location.reload();}else{alert('Не удалось удалить сообщение');}}).catch(function(error){alert('Ошибка при удалении сообщения',error);});};var handleMessageBoxPress=function handleMessageBoxPress(){setShowDeleteButton(!showDeleteButton);};var handleMouseEnter=function handleMouseEnter(){setIsHovered(true);};var handleMouseLeave=function handleMouseLeave(){setIsHovered(false);};var handleNavigation=function handleNavigation(){if(answer){navigationt.navigate('Chat',{chatUser:nav});}else{navigationt.navigate('Channel',{channelId:nav});}};return _jsxs(View,{style:styles.container,children:[own?null:_jsx(ShowAvatar,{imageUrl:imageUrl,profile:false,style:styles.avatar}),_jsxs(TouchableOpacity,{style:[styles.messageBox,own&&styles.ownMessageBox],onPress:handleMessageBoxPress,children:[showDeleteButton&&_jsx(TouchableOpacity,{onPress:handleDeletePress,children:_jsx(Text,{style:{fontFamily:'Montserrat-Italic'},children:\"\\u0423\\u0434\\u0430\\u043B\\u0438\\u0442\\u044C\"})}),_jsx(Text,{style:[styles.nickname,own&&styles.ownNickname],children:nickname}),_jsx(Text,{style:[styles.message,own&&styles.ownMessage],children:message}),_jsx(TouchableHighlight,{onPress:handleNavigation,onMouseEnter:handleMouseEnter,onMouseLeave:handleMouseLeave,children:_jsxs(Text,{style:{fontFamily:'Montserrat-Italic',fontSize:Math.min(width*0.008,height*0.025),color:isHovered?'white':'black'},children:[\"Forwarded from: \",from]})}),!own&&_jsx(View,{style:styles.bubbleTail})]})]});};export default ForwardMessage;","map":{"version":3,"names":["React","useContext","useState","View","Text","TouchableOpacity","useWindowDimensions","TouchableHighlight","ShowAvatar","useStyles","AuthContext","useNavigation","useIsFocused","jsx","_jsx","jsxs","_jsxs","ForwardMessage","_ref","data","imageUrl","nickname","message","own","from","id","nav","answer","styles","_useState","_useState2","_slicedToArray","showDeleteButton","setShowDeleteButton","_useContext","user","username","password","_useState3","_useState4","isHovered","setIsHovered","_useWindowDimensions","width","height","navigationt","handleDeletePress","user_id","message_id","fetch","method","headers","btoa","then","response","ok","window","location","reload","alert","catch","error","handleMessageBoxPress","handleMouseEnter","handleMouseLeave","handleNavigation","navigate","chatUser","channelId","style","container","children","profile","avatar","messageBox","ownMessageBox","onPress","fontFamily","ownNickname","ownMessage","onMouseEnter","onMouseLeave","fontSize","Math","min","color","bubbleTail"],"sources":["C:/Users/ilias/OneDrive/Рабочий стол/messenger_project/Application/Client/components/forwardMessage/forwardMessage.js"],"sourcesContent":["import React, { useContext, useState } from 'react';\r\nimport { View, Text, TouchableOpacity, useWindowDimensions, TouchableHighlight } from 'react-native-web';\r\nimport ShowAvatar from '../Avatar/ShowAvatar/showAvatar';\r\nimport useStyles from './forwardMessage.module';\r\nimport AuthContext from '../../context/AuthContext';\r\nimport { useNavigation, useIsFocused } from '@react-navigation/native';\r\n\r\nconst ForwardMessage = ({ data }) => {\r\n  const { imageUrl, nickname, message, own, from, id, nav, answer } = data;\r\n  const styles = useStyles();\r\n  const [showDeleteButton, setShowDeleteButton] = useState(false);\r\n  const { user } = useContext(AuthContext);\r\n  const username = 'admin';\r\n  const password = 'root';\r\n  const [isHovered, setIsHovered] = useState(false);\r\n  const { width, height } = useWindowDimensions();\r\n  const navigationt = useNavigation();\r\n  const handleDeletePress = () => {\r\n    const user_id = user.id;\r\n    const message_id = id;\r\n    setShowDeleteButton(false);\r\n    fetch(`https://linking-api.onrender.com/api/saved_message/delete?user_id=${user_id}&message_id=${message_id}`, {\r\n      method: 'DELETE',\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n        'Authorization': `Basic ${btoa(`${username}:${password}`)}`\r\n      },\r\n    })\r\n      .then((response) => {\r\n        if (response.ok) {\r\n          window.location.reload();\r\n        } else {\r\n          alert('Не удалось удалить сообщение');\r\n        }\r\n      })\r\n      .catch((error) => {\r\n        alert('Ошибка при удалении сообщения', error);\r\n      });\r\n  };\r\n\r\n  const handleMessageBoxPress = () => {\r\n    setShowDeleteButton(!showDeleteButton);\r\n  };\r\n\r\n  const handleMouseEnter = () => {\r\n    setIsHovered(true);\r\n  };\r\n\r\n  const handleMouseLeave = () => {\r\n    setIsHovered(false);\r\n  };\r\n\r\n  const handleNavigation = () => {\r\n    if (answer) {\r\n      navigationt.navigate('Chat', { chatUser: nav });\r\n    } else {\r\n      navigationt.navigate('Channel', { channelId: nav });\r\n    }\r\n  };\r\n\r\n  return (\r\n    <View style={styles.container}>\r\n      {own ? null : (\r\n        <ShowAvatar imageUrl={imageUrl} profile={false} style={styles.avatar} />\r\n      )}\r\n      <TouchableOpacity\r\n        style={[\r\n          styles.messageBox,\r\n          own && styles.ownMessageBox,\r\n        ]}\r\n        onPress={handleMessageBoxPress}\r\n      >\r\n        {showDeleteButton && (\r\n          <TouchableOpacity onPress={handleDeletePress}>\r\n            <Text style={{ fontFamily: 'Montserrat-Italic' }}>Удалить</Text>\r\n          </TouchableOpacity>\r\n        )}\r\n        <Text style={[styles.nickname, own && styles.ownNickname]}>\r\n          {nickname}\r\n        </Text>\r\n        <Text style={[styles.message, own && styles.ownMessage]}>{message}</Text>\r\n        <TouchableHighlight onPress={handleNavigation}\r\n          onMouseEnter={handleMouseEnter}\r\n          onMouseLeave={handleMouseLeave}>\r\n          <Text style={{\r\n            fontFamily: 'Montserrat-Italic',\r\n            fontSize: Math.min(width * 0.008, height * 0.025),\r\n            color: isHovered ? 'white' : 'black',\r\n          }}>\r\n            Forwarded from: {from}\r\n          </Text>\r\n        </TouchableHighlight >\r\n        {!own && <View style={styles.bubbleTail} />}\r\n      </TouchableOpacity>\r\n    </View>\r\n  );\r\n};\r\n\r\nexport default ForwardMessage;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}