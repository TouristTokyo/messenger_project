{"ast":null,"code":"import _defineProperty from\"@babel/runtime/helpers/defineProperty\";import _asyncToGenerator from\"@babel/runtime/helpers/asyncToGenerator\";import _slicedToArray from\"@babel/runtime/helpers/slicedToArray\";function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable;})),keys.push.apply(keys,symbols);}return keys;}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?ownKeys(Object(source),!0).forEach(function(key){_defineProperty(target,key,source[key]);}):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key));});}return target;}import React,{useState,useRef,useEffect,useContext}from'react';import View from\"react-native-web/dist/exports/View\";import Text from\"react-native-web/dist/exports/Text\";import TouchableHighlight from\"react-native-web/dist/exports/TouchableHighlight\";import TouchableOpacity from\"react-native-web/dist/exports/TouchableOpacity\";import useWindowDimensions from\"react-native-web/dist/exports/useWindowDimensions\";import{useFocusEffect}from'@react-navigation/native';import useStyles from\"./styles/mainAuthScreen.module\";import HeaderButton from\"../components/buttons/headerButton\";import ChangeAvatar from\"../components/Avatar/ChangeAvatar/changeAvatar\";import BackSvg from\"../assets/icons/backSvg\";import AddSvg from\"../assets/icons/addSvg\";import NicknameInput from\"../components/inputs/nicknameInput/nicknameInput\";import AsyncStorage from'@react-native-async-storage/async-storage';import{ImageContext}from\"../context/ImageContext\";import AuthContext from\"../context/AuthContext\";import{setProfileNickname,getProfileNickname,getEmail}from\"../context/AsyncStorageUtil\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function ProfileScreen(_ref){var navigation=_ref.navigation;var styles=useStyles();var _useContext=useContext(ImageContext),selectedImage=_useContext.selectedImage;var _useContext2=useContext(AuthContext),user=_useContext2.user;var _useState=useState({name:(user==null?void 0:user.name)||''}),_useState2=_slicedToArray(_useState,2),inputText=_useState2[0],setInputText=_useState2[1];var _useWindowDimensions=useWindowDimensions(),width=_useWindowDimensions.width,height=_useWindowDimensions.height;var username='admin';var password='root';var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),userText=_useState4[0],setUserText=_useState4[1];useFocusEffect(React.useCallback(function(){fetchEmail();},[user]));var fetchEmail=function(){var _ref2=_asyncToGenerator(function*(){try{var email=yield getEmail();if(email&&email!==userText){setUserText(email);}else if(!email&&!userText){setUserText((user==null?void 0:user.email)||'');}}catch(error){console.log('Ошибка при подгрузке почты:',error);}});return function fetchEmail(){return _ref2.apply(this,arguments);};}();var emailContainerRef=useRef(null);var _useState5=useState(36),_useState6=_slicedToArray(_useState5,2),emailFontSize=_useState6[0],setEmailFontSize=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),showInputField=_useState8[0],setShowInputField=_useState8[1];var _useState9=useState(0),_useState10=_slicedToArray(_useState9,2),rotationDeg=_useState10[0],setRotationDeg=_useState10[1];useEffect(function(){handleEmailLayout();fetchSavedNickname();},[]);var handleEmailLayout=function handleEmailLayout(){var emailContainerWidth=emailContainerRef.current.offsetWidth;var desiredMaxWidth=300;var desiredMaxFontSize=Math.min(width*0.02,height*0.045);var emailFontSize=Math.min(desiredMaxFontSize,desiredMaxWidth/emailContainerWidth*desiredMaxFontSize);setEmailFontSize(emailFontSize);};var fetchSavedNickname=function(){var _ref3=_asyncToGenerator(function*(){try{var savedNickname=yield AsyncStorage.getItem('profile_nickname');if(savedNickname){setInputText({name:savedNickname});}}catch(error){console.log('Error fetching saved nickname:',error);}});return function fetchSavedNickname(){return _ref3.apply(this,arguments);};}();var handleAddSvgPress=function(){var _ref4=_asyncToGenerator(function*(){if(showInputField){setShowInputField(false);setRotationDeg(0);try{yield setProfileNickname(inputText.name);if(inputText.name!==user.name){yield updateName(inputText.name);}}catch(error){console.log('Ошибка сохранения никнейма:',error);}}else{setShowInputField(true);setRotationDeg(90);}try{var profileNickname=yield getProfileNickname();console.log('Profile nickname:',profileNickname);}catch(error){console.log('Ошибка при подгрузке никнейма:',error);}});return function handleAddSvgPress(){return _ref4.apply(this,arguments);};}();var addSvgStyle={transform:\"rotate(\"+(showInputField?45:0)+\"deg)\",transition:'transform 0.5s ease'};var updateName=function(){var _ref5=_asyncToGenerator(function*(newName){try{var id=user==null?void 0:user.id;if(id){var response=yield fetch(\"https://backend-web-service-test.onrender.com/api/users/\"+id+\"/update/name?name=\"+encodeURIComponent(newName),{method:'PUT',headers:{'Content-Type':'application/json','Authorization':\"Basic \"+btoa(username+\":\"+password)}});if(response.ok){}else{alert('Не удалось обновить имя пользователя');}}}catch(error){alert('Ошибка при подключении к серверу',error);}});return function updateName(_x){return _ref5.apply(this,arguments);};}();return _jsxs(View,{style:styles.containerMain,children:[_jsxs(View,{style:styles.profileSettingsContainer,children:[_jsx(View,{style:{marginBottom:13},children:_jsx(ChangeAvatar,{children:selectedImage})}),_jsxs(View,{style:styles.nicknameContainer,children:[showInputField?_jsx(NicknameInput,{value:inputText.name,setValue:function setValue(text){return setInputText(_objectSpread(_objectSpread({},inputText),{},{name:text}));},flex:false}):_jsx(Text,{style:{fontSize:Math.min(width*0.03,height*0.055),fontFamily:'Montserrat-Regular',paddingHorizontal:30},children:inputText.name}),_jsx(TouchableOpacity,{onPress:handleAddSvgPress,children:_jsx(AddSvg,{style:addSvgStyle})})]}),_jsx(View,{style:{borderTopWidth:1,borderBottomWidth:1,borderColor:'#000000',paddingHorizontal:10,paddingVertical:15,width:width*0.2,overflow:'hidden',textOverflow:'ellipsis',whiteSpace:'nowrap',marginBottom:13},children:_jsx(View,{ref:emailContainerRef,onLayout:handleEmailLayout,children:_jsx(Text,{style:{color:'#000000',fontSize:emailFontSize,textAlign:'center',fontFamily:'Montserrat-Regular',marginBottom:13},children:userText?userText:user.email})})}),_jsx(View,{style:{alignItems:'center',width:'100%',marginLeft:20},children:_jsx(HeaderButton,{title:'Изменить почту',onPress:function onPress(){return navigation.navigate('ChangeEmail');}})}),_jsx(View,{style:{marginBottom:13,alignItems:'center',width:'100%',marginLeft:20},children:_jsx(HeaderButton,{title:'Изменить пароль',onPress:function onPress(){return navigation.navigate('ChangePassword');}})})]}),_jsx(View,{style:styles.topLeft,children:_jsx(TouchableHighlight,{onPress:function onPress(){return navigation.navigate('MainAuth');},children:_jsx(BackSvg,{})})})]});}","map":{"version":3,"names":["React","useState","useRef","useEffect","useContext","View","Text","TouchableHighlight","TouchableOpacity","useWindowDimensions","useFocusEffect","useStyles","HeaderButton","ChangeAvatar","BackSvg","AddSvg","NicknameInput","AsyncStorage","ImageContext","AuthContext","setProfileNickname","getProfileNickname","getEmail","jsx","_jsx","jsxs","_jsxs","ProfileScreen","_ref","navigation","styles","_useContext","selectedImage","_useContext2","user","_useState","name","_useState2","_slicedToArray","inputText","setInputText","_useWindowDimensions","width","height","username","password","_useState3","_useState4","userText","setUserText","useCallback","fetchEmail","_ref2","_asyncToGenerator","email","error","console","log","apply","arguments","emailContainerRef","_useState5","_useState6","emailFontSize","setEmailFontSize","_useState7","_useState8","showInputField","setShowInputField","_useState9","_useState10","rotationDeg","setRotationDeg","handleEmailLayout","fetchSavedNickname","emailContainerWidth","current","offsetWidth","desiredMaxWidth","desiredMaxFontSize","Math","min","_ref3","savedNickname","getItem","handleAddSvgPress","_ref4","updateName","profileNickname","addSvgStyle","transform","transition","_ref5","newName","id","response","fetch","encodeURIComponent","method","headers","btoa","ok","alert","_x","style","containerMain","children","profileSettingsContainer","marginBottom","nicknameContainer","value","setValue","text","_objectSpread","flex","fontSize","fontFamily","paddingHorizontal","onPress","borderTopWidth","borderBottomWidth","borderColor","paddingVertical","overflow","textOverflow","whiteSpace","ref","onLayout","color","textAlign","alignItems","marginLeft","title","navigate","topLeft"],"sources":["C:/Users/ilias/OneDrive/Рабочий стол/test/screens/ProfileScreen.js"],"sourcesContent":["import React, { useState, useRef, useEffect, useContext } from 'react';\r\nimport { View, Text, TouchableHighlight, TouchableOpacity, useWindowDimensions } from 'react-native';\r\nimport { useFocusEffect } from '@react-navigation/native';\r\nimport useStyles from './styles/mainAuthScreen.module';\r\nimport HeaderButton from '../components/buttons/headerButton';\r\nimport ChangeAvatar from '../components/Avatar/ChangeAvatar/changeAvatar';\r\nimport BackSvg from '../assets/icons/backSvg';\r\nimport AddSvg from '../assets/icons/addSvg';\r\nimport NicknameInput from '../components/inputs/nicknameInput/nicknameInput';\r\nimport AsyncStorage from '@react-native-async-storage/async-storage';\r\nimport { ImageContext } from '../context/ImageContext';\r\nimport AuthContext from '../context/AuthContext';\r\nimport { setProfileNickname, getProfileNickname, getEmail } from '../context/AsyncStorageUtil';\r\n\r\nexport default function ProfileScreen({ navigation }) {\r\n  const styles = useStyles();\r\n  const { selectedImage } = useContext(ImageContext);\r\n  const { user } = useContext(AuthContext);\r\n  const [inputText, setInputText] = useState({\r\n    name: user?.name || '', \r\n  });\r\n  const { width, height } = useWindowDimensions();\r\n  const username = 'admin';\r\n  const password = 'root';\r\n  const [userText, setUserText] = useState('');\r\n\r\n  useFocusEffect(\r\n    React.useCallback(() => {\r\n      fetchEmail();\r\n    }, [user])\r\n  );\r\n\r\n  const fetchEmail = async () => {\r\n    try {\r\n      const email = await getEmail();\r\n      if (email && email !== userText) {\r\n        setUserText(email);\r\n      } else if (!email && !userText) {\r\n        setUserText(user?.email || '');\r\n      }\r\n    } catch (error) {\r\n      console.log('Ошибка при подгрузке почты:', error);\r\n    }\r\n  };\r\n  const emailContainerRef = useRef(null);\r\n  const [emailFontSize, setEmailFontSize] = useState(36);\r\n\r\n\r\n  const [showInputField, setShowInputField] = useState(false); \r\n  const [rotationDeg, setRotationDeg] = useState(0);\r\n\r\n  useEffect(() => {\r\n    handleEmailLayout();\r\n    fetchSavedNickname();\r\n  }, []);\r\n\r\n  const handleEmailLayout = () => {\r\n    const emailContainerWidth = emailContainerRef.current.offsetWidth;\r\n    const desiredMaxWidth = 300;\r\n    const desiredMaxFontSize = Math.min(width * 0.02, height * 0.045);\r\n    const emailFontSize = Math.min(desiredMaxFontSize, (desiredMaxWidth / emailContainerWidth) * desiredMaxFontSize);\r\n    setEmailFontSize(emailFontSize);\r\n  };\r\n\r\n  const fetchSavedNickname = async () => {\r\n    try {\r\n      const savedNickname = await AsyncStorage.getItem('profile_nickname');\r\n      if (savedNickname) {\r\n        setInputText({ name: savedNickname });\r\n      }\r\n    } catch (error) {\r\n      console.log('Error fetching saved nickname:', error);\r\n    }\r\n  };\r\n\r\n  const handleAddSvgPress = async () => {\r\n    if (showInputField) {\r\n      setShowInputField(false);\r\n      setRotationDeg(0);\r\n      try {\r\n        await setProfileNickname(inputText.name);\r\n        if (inputText.name !== user.name) {\r\n          await updateName(inputText.name);\r\n        }\r\n      } catch (error) {\r\n        console.log('Ошибка сохранения никнейма:', error);\r\n      }\r\n    } else {\r\n      setShowInputField(true);\r\n      setRotationDeg(90); \r\n    }\r\n    try {\r\n      const profileNickname = await getProfileNickname();\r\n      console.log('Profile nickname:', profileNickname);\r\n    } catch (error) {\r\n      console.log('Ошибка при подгрузке никнейма:', error);\r\n    }\r\n  };\r\n\r\n  const addSvgStyle = {\r\n    transform: `rotate(${showInputField ? 45 : 0}deg)`,\r\n    transition: 'transform 0.5s ease', \r\n  };\r\n\r\n  const updateName = async (newName) => {\r\n    try {\r\n      const id = user?.id; \r\n      if (id) {\r\n        const response = await fetch(`https://backend-web-service-test.onrender.com/api/users/${id}/update/name?name=${encodeURIComponent(newName)}`, {\r\n          method: 'PUT',\r\n          headers: {\r\n            'Content-Type': 'application/json',\r\n            'Authorization': `Basic ${btoa(`${username}:${password}`)}`,\r\n          },\r\n        });\r\n\r\n        if (response.ok) {\r\n        } else {\r\n          alert('Не удалось обновить имя пользователя');\r\n        }\r\n      }\r\n    } catch (error) {\r\n      alert('Ошибка при подключении к серверу', error);\r\n    }\r\n  };\r\n\r\n\r\n\r\n\r\n  return (\r\n    <View style={styles.containerMain}>\r\n      <View style={styles.profileSettingsContainer}>\r\n        <View style={{ marginBottom: 13 }}>\r\n          <ChangeAvatar  children={selectedImage}/>\r\n        </View>\r\n        <View style={styles.nicknameContainer}>\r\n          {showInputField ? (\r\n            <NicknameInput\r\n              value={inputText.name}\r\n              setValue={(text) => setInputText({ ...inputText, name: text })}\r\n              flex={false}\r\n            />\r\n          ) : (\r\n            <Text style={{ fontSize:  Math.min(width * 0.03, height * 0.055), fontFamily: 'Montserrat-Regular', paddingHorizontal: 30 }}>\r\n              {inputText.name}\r\n            </Text>\r\n          )}\r\n          <TouchableOpacity onPress={handleAddSvgPress}>\r\n            <AddSvg style={addSvgStyle} />\r\n          </TouchableOpacity>\r\n        </View>\r\n        <View\r\n          style={{\r\n            borderTopWidth: 1,\r\n            borderBottomWidth: 1,\r\n            borderColor: '#000000',\r\n            paddingHorizontal: 10,\r\n            paddingVertical: 15,\r\n            width: width * 0.2,\r\n            overflow: 'hidden',\r\n            textOverflow: 'ellipsis',\r\n            whiteSpace: 'nowrap',\r\n            marginBottom: 13,\r\n          }}\r\n        >\r\n          <View ref={emailContainerRef} onLayout={handleEmailLayout}>\r\n            <Text\r\n              style={{\r\n                color: '#000000',\r\n                fontSize: emailFontSize,\r\n                textAlign: 'center',\r\n                fontFamily: 'Montserrat-Regular',\r\n                marginBottom: 13,\r\n              }}\r\n            >\r\n              {userText ? userText : user.email}\r\n            </Text>\r\n          </View>\r\n        </View>\r\n        <View style = {{alignItems: 'center', width: '100%', marginLeft: 20}}>\r\n          <HeaderButton title={'Изменить почту'} onPress={() => navigation.navigate('ChangeEmail')} />\r\n        </View>\r\n        <View style={{ marginBottom: 13,alignItems: 'center', width: '100%', marginLeft: 20}}>\r\n          <HeaderButton title={'Изменить пароль'} onPress={() => navigation.navigate('ChangePassword')} />\r\n        </View>\r\n      </View>\r\n      <View style={styles.topLeft}>\r\n        <TouchableHighlight onPress={() => navigation.navigate('MainAuth')}>\r\n          <BackSvg />\r\n        </TouchableHighlight>\r\n      </View>\r\n    </View>\r\n  );\r\n}\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}